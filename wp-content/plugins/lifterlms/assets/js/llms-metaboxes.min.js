!function(p){p.fn.llmsCollapsible=function(){return this.on("click",".llms-collapsible-header",function(){var e=p(this).closest(".llms-collapsible"),t=e.siblings(".llms-collapsible");e.toggleClass("opened"),e.find(".llms-collapsible-body").slideToggle(400),t.each(function(){p(this).removeClass("opened"),p(this).find(".llms-collapsible-body").slideUp(400)})}),this},window.llms=window.llms||{};window.llms.metaboxes=new function(){this.repeaters={metaboxes:this,$repeaters:null,init:function(){var e=this;e.$repeaters=p(".llms-mb-list.repeater"),e.$repeaters.length&&(LLMS.wait_for(function(){return"undefined"!=typeof tinyMCE},function(){e.load(),e.bind()}),p('#post input[type="submit"]').on("click",function(){p(this).attr("data-llms-clicked","yes")}),p("#post").on("submit",e.handle_submit))},bind:function(){var l=this;l.$repeaters.each(function(){var a=p(this),n=a.find(".llms-repeater-rows"),e=a.find(".llms-repeater-model");tinyMCE.EditorManager.execCommand("mceRemoveEditor",!0,e.find(".llms-mb-list.editor textarea").attr("id")),a.find(".llms-repeater-new-btn").on("click",function(){l.add_row(a,null,!0)}),n.sortable({handle:".llms-drag-handle",items:".llms-repeater-row",start:function(e,t){n.addClass("dragging")},stop:function(e,t){n.removeClass("dragging"),t.item.find("textarea.wp-editor-area").each(function(){var e=p(this).attr("id");tinyMCE.EditorManager.execCommand("mceRemoveEditor",!0,e),tinyMCE.EditorManager.execCommand("mceAddEditor",!0,e)}),l.save(a)}}),a.on("click",".llms-repeater-remove",function(e){e.stopPropagation();var t=p(this).closest(".llms-repeater-row");window.confirm(LLMS.l10n.translate("Are you sure you want to delete this row? This cannot be undone."))&&(t.remove(),setTimeout(function(){l.save(a)},1))})})},add_row:function(e,t,a){var n=this,l=e.find(".llms-repeater-rows"),i=e.find(".llms-repeater-model").find(".llms-repeater-row").clone(),s=e.find(".llms-repeater-row").length,r=n.reindex(i,s);t&&p.each(t,function(e,t){var a=i.find('[name^="'+e+'"]');a.hasClass("llms-select2-student")?(p.each(t,function(e,t){a.append('<option value="'+t.key+'" selected="selected">'+t.title+"</option>")}),a.trigger("change")):a.val(t)}),setTimeout(function(){n.bind_row(i)},1),l.append(i),a&&i.find(".llms-collapsible-header").trigger("click"),tinyMCE.EditorManager.execCommand("mceAddEditor",!0,r),e.trigger("llms-new-repeater-row",{$row:i,data:t})},bind_row:function(e){this.bind_row_header(e),e.find(".llms-select2").llmsSelect2({width:"100%"}),e.find(".llms-select2-student").llmsStudentsSelect2(),this.metaboxes.bind_datepickers(e.find(".llms-datepicker")),this.metaboxes.bind_controllers(e.find("[data-is-controller]"))},bind_row_header:function(e){var t=e.find(".llms-repeater-title"),a=e.find(".llms-collapsible-header-title-field");t.attr("data-default",t.text()),a.on("keyup focusout blur",function(){var e=p(this).val();e||(e=t.attr("data-default")),t.text(e)}).trigger("keyup")},handle_submit:function(e){e.preventDefault();var t=p('#post [data-llms-clicked="yes"]'),a=t.parent().find(".spinner");p('#post input[type="submit"]').addClass("disabled"),a.addClass("is-active");var n,l=window.llms.metaboxes.repeaters,i=0;l.$repeaters.each(function(){l.save(p(this))}),n=setInterval(function(){59<=i||!p(".llms-mb-list.repeater.processing").length?(clearInterval(n),p("#post").off("submit",this.handle_submit),a.removeClass("is-active"),t.removeClass("disabled").trigger("click")):i++},1e3)},load:function(){var n=this;n.$repeaters.each(function(){var a=p(this);a.hasClass("is-loaded")||a.hasClass("processing")||n.store(a,"load",function(e){a.addClass("is-loaded"),p.each(e.data,function(e,t){n.add_row(a,t,!1)}),a.find(".llms-repeater-rows .llms-repeater-row").each(function(){n.bind_row(p(this))})})})},reindex:function(e,a){var n=e.attr("data-row-order"),t=e.find(".llms-mb-list.editor textarea");function l(e,t){e.each(function(){var e=p(this).attr(t);p(this).attr(t,e.replace(n,a))})}return tinyMCE.EditorManager.execCommand("mceRemoveEditor",!0,t.attr("id")),e.attr("data-row-order",a),l(e,"data-row-order"),l(e.find("button.insert-media"),"data-editor"),l(e.find('input[name^="_llms"], textarea[name^="_llms"], select[name^="_llms"]'),"id"),l(e.find('input[name^="_llms"], textarea[name^="_llms"], select[name^="_llms"]'),"name"),l(e.find("[data-controller]"),"data-controller"),l(e.find("[data-controller]"),"data-controller"),l(e.find("button.wp-switch-editor"),"data-wp-editor-id"),l(e.find("button.wp-switch-editor"),"id"),l(e.find(".wp-editor-tools"),"id"),l(e.find(".wp-editor-container"),"id"),t.attr("id")},save:function(e){e.trigger("llms-repeater-before-save",{$el:e}),this.store(e,"save")},serialize:function(e){var a=[];return e.find(".llms-repeater-rows .llms-repeater-row").each(function(){var t={};p(this).find('input[name^="_llms"], select[name^="_llms"]').each(function(){t[p(this).attr("name")]=p(this).val()}),p(this).find('textarea[name^="_llms"]').each(function(){var e=p(this).attr("name");tinyMCE.editors[e]?t[e]=tinyMCE.editors[e].getContent():t[e]=p(this).val()}),a.push(t)}),a},store:function(t,e,a){a=a||function(){};var n={action:t.find(".llms-repeater-field-handler").val(),store_action:e};"save"===e&&(n.rows=this.serialize(t)),LLMS.Ajax.call({data:n,beforeSend:function(){t.addClass("processing"),LLMS.Spinner.start(t)},success:function(e){a(e),LLMS.Spinner.stop(t),t.removeClass("processing")}})}},this.repeaters.init(),this.init=function(){var n=this;p(".llms-select2-post").each(function(){n.post_select(p(this))}),p(".llms-collapsible-group").llmsCollapsible(),this.bind_tabs();var e=[{selector:p(".llms-datepicker"),func:"bind_datepickers"},{selector:p(".llms-select2"),func:function(e){e.llmsSelect2({width:"100%"})}},{selector:p(".llms-select2-student"),func:function(e){e.llmsStudentsSelect2()}},{selector:p('input[type="checkbox"][data-controls]'),func:"bind_cb_controllers"},{selector:p("[data-is-controller]"),func:"bind_controllers"},{selector:p(".llms-table"),func:"bind_tables"},{selector:p(".llms-merge-code-wrapper"),func:"bind_merge_code_buttons"},{selector:p("a.llms-editable"),func:"bind_editables"}];if(p.each(e,function(e,t){if(t.selector.length){var a=t.selector.filter(function(){return 0===p(this).closest(".llms-repeater-model").length});"string"==typeof t.func?n[t.func](a):"function"==typeof t.func&&t.func(a)}}),window.llms.post.post_type){var t="bind_"+window.llms.post.post_type;"function"==typeof this[t]&&this[t]()}},this.bind_cb_controllers=function(e){(e=e||p('input[type="checkbox"][data-controls]')).each(function(){var e=p(this),t=p(e.attr("data-controls")).closest(".llms-mb-list");e.on("change",function(){p(this).is(":checked")?t.slideDown(200):t.slideUp(200)}),e.trigger("change")})},this.bind_controllers=function(e){(e=e||p("[data-is-controller]")).each(function(){var a,e=p(this),t=p('[data-controller="#'+e.attr("id")+'"]');e.on("change",function(){a="checkbox"===e.attr("type")?e.is(":checked")?e.val():"false":e.val(),t.each(function(){var e=p(this).attr("data-controller-value"),t=[];-1!==e.indexOf(",")?t=e.split(","):t.push(e),-1!==t.indexOf(a)?p(this).slideDown(200):p(this).slideUp(200)})}),e.trigger("change")})},this.bind_datepicker=function(e){var t=e.attr("data-format")||"mm/dd/yy",a=e.attr("data-max-date")||null,n=e.attr("data-min-date")||null;e.datepicker({dateFormat:t,maxDate:a,minDate:n})},this.bind_datepickers=function(e){var t=this;(e=e||p(".llms-datepicker")).each(function(){t.bind_datepicker(p(this))})},this.bind_editables=function(){var f=this;p("a.llms-editable").on("click",function(e){e.preventDefault();var t,a=p(this);t=a.attr("data-fields")?p(a.attr("data-fields")):a.closest(".llms-metabox-section").find("[data-llms-editable]"),a.remove(),t.each(function(){!function(e){var t,a=e.find("label").clone(),n=e.attr("data-llms-editable"),l=e.attr("data-llms-editable-type"),i=e.attr("data-llms-editable-required")||"no",s=e.attr("data-llms-editable-value");if(i="yes"===i?' required="required"':"","select"===l){var r,o=JSON.parse(e.attr("data-llms-editable-options"));for(var d in t=p('<select name="'+n+'"'+i+" />"),o)r=s===d?' selected="selected"':"",t.append('<option value="'+d+'"'+r+">"+o[d]+"</option>")}else if("datetime"===l){t=p('<div class="llms-datetime-field" />'),s=JSON.parse(s);var c=e.attr("data-llms-editable-date-format")||"",m=e.attr("data-llms-editable-date-min")||"",u=e.attr("data-llms-editable-date-max")||"";$picker=p('<input class="llms-date-input llms-datepicker" data-format="'+c+'" data-max-date="'+u+'" data-min-date="'+m+'" name="'+n+'[date]" type="text" value="'+s.date+'">'),f.bind_datepicker($picker),t.append($picker),t.append("<em>@</em>"),t.append('<input class="llms-time-input" max="23" min="0" name="'+n+'[hour]" type="number" value="'+s.hour+'">'),t.append("<em>:</em>"),t.append('<input class="llms-time-input" max="59" min="0" name="'+n+'[minute]" type="number" value="'+s.minute+'">')}else t=p('<input name="'+n+'" type="'+l+'" value="'+s+'"'+i+">");e.empty().append(a).append(t)}(p(this))})})},this.bind_llms_engagement=function(){var l=this;p("#_llms_engagement_type").on("change",function(){p("#_llms_engagement").trigger("llms-engagement-type-change",p(this).val())}),p("#_llms_engagement").on("llms-engagement-type-change",function(e,t){var a=p(this);switch(t){case"achievement":case"certificate":case"email":var n="llms_"+t;a.val(null).attr("data-post-type",n).trigger("change"),l.post_select(a);break;default:a.trigger("llms-engagement-type-change-external",t)}})},this.bind_llms_membership=function(){p('a[href="#llms-course-remove"]').on("click",function(e){e.preventDefault();var t=p(this),a=t.closest("tr"),n=t.closest(".llms-mb-list");LLMS.Spinner.start(n),window.LLMS.Ajax.call({data:{action:"membership_remove_auto_enroll_course",course_id:t.attr("data-id")},beforeSend:function(){n.find("p.error").remove()},success:function(e){e.success?(a.fadeOut(200),setTimeout(function(){a.remove()},400)):n.prepend('<p class="error">'+e.message+"</p>"),LLMS.Spinner.stop(n)}})}),p('a[href="#llms-course-bulk-enroll"]').on("click",function(e){e.preventDefault();var t=p(this),a=(t.closest("tr"),t.closest(".llms-mb-list"));window.confirm(LLMS.l10n.translate("Click okay to enroll all active members into the selected course. Enrollment will take place in the background and you may leave your site after confirmation. This action cannot be undone!"))&&(LLMS.Spinner.start(a),window.LLMS.Ajax.call({data:{action:"bulk_enroll_membership_into_course",course_id:t.attr("data-id")},beforeSend:function(){a.find("p.error").remove()},success:function(e){e.success?t.replaceWith('<strong style="float:right;">'+e.data.message+"&nbsp;&nbsp;</strong>"):a.prepend('<p class="error">'+e.message+"</p>"),LLMS.Spinner.stop(a)}}))})},this.bind_llms_order=function(){p('button[name="llms-refund-toggle"]').on("click",function(){var e=p(this),t=e.closest("tr"),a=t.attr("data-transaction-id"),n=e.attr("data-refundable"),l="1"===e.attr("data-gateway-supports"),i=e.attr("data-gateway"),s=p("#llms-txn-refund-model .llms-txn-refund-form").clone(),r=s.find(".gateway-btn");"remove"!==e.attr("data-action")?(e.text(LLMS.l10n.translate("Cancel")),e.attr("data-action","remove"),s.find("input").removeAttr("disabled"),s.find('input[name="llms_refund_amount"]').attr("max",n),s.find('input[name="llms_refund_txn_id"]').val(a),l&&(r.find(".llms-gateway-title").text(i),r.show()),t.after(s)):(e.text(LLMS.l10n.translate("Refund")),e.attr("data-action",""),t.next("tr").remove())}),p('button[name="llms-manual-txn-toggle"]').on("click",function(){var e=p(this),t=e.closest("tr"),a=p("#llms-manual-txn-model .llms-manual-txn-form").clone();"remove"!==e.attr("data-action")?(e.text(LLMS.l10n.translate("Cancel")),e.attr("data-action","remove"),a.find("input").removeAttr("disabled"),t.after(a)):(e.text(LLMS.l10n.translate("Record a Manual Payment")),e.attr("data-action",""),t.next("tr").remove())}),p(".llms-metabox").one("focus",'.llms-metabox-field[data-llms-editable="payment_gateway"] select',function(){p(this).attr("data-original-value")||p(this).attr("data-original-value",p(this).val())}),p(".llms-metabox").on("change",'.llms-metabox-field[data-llms-editable="payment_gateway"] select',function(){var e=p(this),t=e.val(),a=JSON.parse(e.closest(".llms-metabox-field").attr("data-gateway-fields"))[t];for(var n in a){var l=p('input[name="'+a[n].name+'"]'),i=l.closest(".llms-metabox-field");l.attr("value",""),a[n].enabled?(i.show(),l.attr("required","required"),t===e.attr("data-original-value")&&l.val(i.attr("data-llms-editable-value"))):(l.removeAttr("required"),i.hide())}})},this.bind_merge_code_buttons=function(e){(e=e||p(".llms-merge-code-wrapper")).find(".llms-merge-code-button").on("click",function(){p(this).next(".llms-merge-codes").toggleClass("active")}),e.find(".llms-merge-codes li").on("click",function(){var e=p(this),t=e.closest(".llms-merge-codes"),a=t.attr("data-target"),n=e.attr("data-code");if(-1===a.indexOf("#")){var l=window.tinymce.editors[a];l?l.insertContent(n):alert(LLMS.l10n.translate("Copy this code and paste it into the desired area")+": "+n)}else p(a).val(p(a).val()+n);t.removeClass("active")})},this.bind_tabs=function(){p(".llms-nav-tab-wrapper .tabs li").on("click",function(){var e=p(this),t=e.closest(".llms-mb-container"),a=e.attr("data-tab");e.siblings().removeClass("llms-active"),t.find(".tab-content").removeClass("llms-active"),e.addClass("llms-active"),p("#"+a).addClass("llms-active")})},this.post_select=function(e){var t=e.attr("data-post-type")||post,a=e.attr("data-post-type")||!1;e.llmsSelect2({allowClear:a,ajax:{dataType:"JSON",delay:250,method:"POST",url:window.ajaxurl,data:function(e){return{action:"select2_query_posts",page:e.page?e.page-1:0,post_type:t,term:e.term,_ajax_nonce:wp_ajax_data.nonce}},processResults:function(e,t){return{results:function t(e){return Array.isArray(e)?p.map(e,function(e){return{text:(t=e).name,id:t.id};var t}):p.map(e,function(e){return{text:e.label,children:t(e.items)}})}(e.items),pagination:{more:e.more}}}},cache:!0,width:"80%"});var n=LLMS.l10n.translate("View"),l=p('<a class="llms-button-secondary small" style="margin-left:5px;" target="_blank" href="#">'+n+' <i class="fa fa-external-link" aria-hidden="true"></i></a>');e.next(".select2").after(l),e.on("change",function(){var e=p(this).val();e?l.attr("href","/?p="+e).show():l.hide()}).trigger("change")},this.bind_tables=function(){p('.llms-table button[name="llms-expand-table"]').on("click",function(){var e=p(this),t=e.closest(".llms-table");if(e.attr("data-text")){var a=e.text();e.text(e.attr("data-text")),e.attr("data-text",a)}t.find(".expandable").each(function(){p(this).hasClass("closed")?p(this).addClass("opened").removeClass("closed"):p(this).addClass("closed").removeClass("opened")})})},this.init()}}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxsbXMtbWV0YWJveGVzLmpzIl0sIm5hbWVzIjpbIiQiLCJmbiIsImxsbXNDb2xsYXBzaWJsZSIsInRoaXMiLCJvbiIsIiRwYXJlbnQiLCJjbG9zZXN0IiwiJHNpYmxpbmdzIiwic2libGluZ3MiLCJ0b2dnbGVDbGFzcyIsImZpbmQiLCJzbGlkZVRvZ2dsZSIsImVhY2giLCJyZW1vdmVDbGFzcyIsInNsaWRlVXAiLCJ3aW5kb3ciLCJsbG1zIiwibWV0YWJveGVzIiwicmVwZWF0ZXJzIiwiJHJlcGVhdGVycyIsImluaXQiLCJzZWxmIiwibGVuZ3RoIiwiTExNUyIsIndhaXRfZm9yIiwidGlueU1DRSIsImxvYWQiLCJiaW5kIiwiYXR0ciIsImhhbmRsZV9zdWJtaXQiLCIkcmVwZWF0ZXIiLCIkcm93cyIsIiRtb2RlbCIsIkVkaXRvck1hbmFnZXIiLCJleGVjQ29tbWFuZCIsImFkZF9yb3ciLCJzb3J0YWJsZSIsImhhbmRsZSIsIml0ZW1zIiwic3RhcnQiLCJldmVudCIsInVpIiwiYWRkQ2xhc3MiLCJzdG9wIiwiaXRlbSIsImVkX2lkIiwic2F2ZSIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCIkcm93IiwiY29uZmlybSIsImwxMG4iLCJ0cmFuc2xhdGUiLCJyZW1vdmUiLCJzZXRUaW1lb3V0IiwiZGF0YSIsImV4cGFuZCIsImNsb25lIiwibmV3X2luZGV4IiwiZWRpdG9yIiwicmVpbmRleCIsImtleSIsInZhbCIsIiRmaWVsZCIsImhhc0NsYXNzIiwiaSIsImFwcGVuZCIsInRpdGxlIiwidHJpZ2dlciIsImJpbmRfcm93IiwiYmluZF9yb3dfaGVhZGVyIiwibGxtc1NlbGVjdDIiLCJ3aWR0aCIsImxsbXNTdHVkZW50c1NlbGVjdDIiLCJiaW5kX2RhdGVwaWNrZXJzIiwiYmluZF9jb250cm9sbGVycyIsIiR0aXRsZSIsInRleHQiLCJwcmV2ZW50RGVmYXVsdCIsIiRidG4iLCIkc3Bpbm5lciIsInBhcmVudCIsIndhaXQiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJvZmYiLCJzdG9yZSIsIm9iaiIsImluZGV4Iiwib2xkX2luZGV4IiwiJGVkIiwicmVwbGFjZV9hdHRyIiwiJGVsIiwic3RyIiwicmVwbGFjZSIsInNlcmlhbGl6ZSIsInJvd3MiLCJuYW1lIiwiZWRpdG9ycyIsImdldENvbnRlbnQiLCJwdXNoIiwiYWN0aW9uIiwiY2IiLCJzdG9yZV9hY3Rpb24iLCJBamF4IiwiY2FsbCIsImJlZm9yZVNlbmQiLCJTcGlubmVyIiwic3VjY2VzcyIsInIiLCJwb3N0X3NlbGVjdCIsImJpbmRfdGFicyIsImJpbmRpbmdzIiwic2VsZWN0b3IiLCJmdW5jIiwiJHNlbGVjdG9yIiwicmVkdWNlZCIsImZpbHRlciIsInBvc3QiLCJwb3N0X3R5cGUiLCJiaW5kX2NiX2NvbnRyb2xsZXJzIiwiJGNvbnRyb2xsZXJzIiwiJGNiIiwiJGNvbnRyb2xsZWQiLCJpcyIsInNsaWRlRG93biIsInBvc3NpYmxlIiwidmFscyIsImluZGV4T2YiLCJzcGxpdCIsImJpbmRfZGF0ZXBpY2tlciIsImZvcm1hdCIsIm1heERhdGUiLCJtaW5EYXRlIiwiZGF0ZXBpY2tlciIsImRhdGVGb3JtYXQiLCIkZGF0ZXBpY2tlcnMiLCJiaW5kX2VkaXRhYmxlcyIsIiRmaWVsZHMiLCIkaW5wdXQiLCIkbGFiZWwiLCJ0eXBlIiwicmVxdWlyZWQiLCJzZWxlY3RlZCIsIm9wdGlvbnMiLCJKU09OIiwicGFyc2UiLCJtaW5fZGF0ZSIsIm1heF9kYXRlIiwiJHBpY2tlciIsImRhdGUiLCJob3VyIiwibWludXRlIiwiZW1wdHkiLCJtYWtlX2VkaXRhYmxlIiwiYmluZF9sbG1zX2VuZ2FnZW1lbnQiLCJlbmdhZ2VtZW50X3R5cGUiLCIkc2VsZWN0IiwiY3B0IiwiYmluZF9sbG1zX21lbWJlcnNoaXAiLCIkY29udGFpbmVyIiwiY291cnNlX2lkIiwiZmFkZU91dCIsInByZXBlbmQiLCJtZXNzYWdlIiwicmVwbGFjZVdpdGgiLCJiaW5kX2xsbXNfb3JkZXIiLCJ0eG5faWQiLCJyZWZ1bmRhYmxlX2Ftb3VudCIsImdhdGV3YXlfc3VwcG9ydHMiLCJnYXRld2F5X3RpdGxlIiwiJG5ld19yb3ciLCIkZ2F0ZXdheV9idG4iLCJyZW1vdmVBdHRyIiwic2hvdyIsImFmdGVyIiwibmV4dCIsIm9uZSIsImdhdGV3YXkiLCJnYXRld2F5X2RhdGEiLCJmaWVsZCIsIiR3cmFwIiwiZW5hYmxlZCIsImhpZGUiLCJiaW5kX21lcmdlX2NvZGVfYnV0dG9ucyIsIiR3cmFwcGVycyIsInRhcmdldCIsImNvZGUiLCJ0aW55bWNlIiwiaW5zZXJ0Q29udGVudCIsImFsZXJ0IiwiJG1ldGFib3giLCJ0YWJfaWQiLCJhbGxvd19jbGVhciIsImFsbG93Q2xlYXIiLCJhamF4IiwiZGF0YVR5cGUiLCJkZWxheSIsIm1ldGhvZCIsInVybCIsImFqYXh1cmwiLCJwYXJhbXMiLCJwYWdlIiwidGVybSIsIl9hamF4X25vbmNlIiwid3BfYWpheF9kYXRhIiwibm9uY2UiLCJwcm9jZXNzUmVzdWx0cyIsInJlc3VsdHMiLCJtYXBfZGF0YSIsIkFycmF5IiwiaXNBcnJheSIsIm1hcCIsImlkIiwibGFiZWwiLCJjaGlsZHJlbiIsInBhZ2luYXRpb24iLCJtb3JlIiwiY2FjaGUiLCJtc2ciLCJiaW5kX3RhYmxlcyIsIiR0YWJsZSIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IkNBY0EsU0FBWUEsR0FFWEEsRUFBRUMsR0FBR0MsZ0JBQWtCLFdBb0J0QixPQWhCQUMsS0FBS0MsR0FBSSxRQUFTLDJCQUE0QixXQUU3QyxJQUFJQyxFQUFVTCxFQUFHRyxNQUFPRyxRQUFTLHFCQUNoQ0MsRUFBWUYsRUFBUUcsU0FBVSxxQkFFL0JILEVBQVFJLFlBQWEsVUFFckJKLEVBQVFLLEtBQU0sMEJBQTJCQyxZQUFhLEtBRXRESixFQUFVSyxLQUFNLFdBQ2ZaLEVBQUdHLE1BQU9VLFlBQWEsVUFDdkJiLEVBQUdHLE1BQU9PLEtBQU0sMEJBQTJCSSxRQUFTLFNBSy9DWCxNQUlSWSxPQUFPQyxLQUFPRCxPQUFPQyxNQUFRLEdBMnRDN0JELE9BQU9DLEtBQUtDLFVBQVksSUF6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UixJQUFJbUosRUFBTXBNLEtBQUs0QixLQUFLQyxVQUFXLFFBQzlCMkIsRUFBTy9FLEVBQUcsNEZBQStGMk4sRUFBTSwrREFDaEgvSCxFQUFJb0YsS0FBTSxZQUFhRCxNQUFPaEcsR0FFOUJhLEVBQUl4RixHQUFJLFNBQVUsV0FDakIsSUFBSWlOLEVBQUtyTixFQUFHRyxNQUFPMkQsTUFDZHVKLEVBQ0p0SSxFQUFLbkQsS0FBTSxPQUFRLE9BQVN5TCxHQUFLdkMsT0FFakMvRixFQUFLd0csU0FFSG5ILFFBQVMsV0FVZGpFLEtBQUt5TixZQUFjLFdBRWxCNU4sRUFBRyxnREFBaURJLEdBQUksUUFBUyxXQUVoRSxJQUFJMkUsRUFBTy9FLEVBQUdHLE1BQ2IwTixFQUFTOUksRUFBS3pFLFFBQVMsZUFHeEIsR0FBS3lFLEVBQUtuRCxLQUFNLGFBQWdCLENBQy9CLElBQUlpRCxFQUFPRSxFQUFLRixPQUNoQkUsRUFBS0YsS0FBTUUsRUFBS25ELEtBQU0sY0FDdEJtRCxFQUFLbkQsS0FBTSxZQUFhaUQsR0FJekJnSixFQUFPbk4sS0FBTSxlQUFnQkUsS0FBTSxXQUU3QlosRUFBR0csTUFBTzZELFNBQVUsVUFDeEJoRSxFQUFHRyxNQUFPdUMsU0FBVSxVQUFXN0IsWUFBYSxVQUU1Q2IsRUFBR0csTUFBT3VDLFNBQVUsVUFBVzdCLFlBQWEsZUFVaERWLEtBQUtpQixRQWh2Q1AsQ0F1dkNLME0iLCJmaWxlIjoibGxtcy1tZXRhYm94ZXMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqXG4gKiBDb250cmlidXRvcidzIE5vdGljZVxuICogXG4gKiBUaGlzIGlzIGEgY29tcGlsZWQgZmlsZSBhbmQgc2hvdWxkIG5vdCBiZSBlZGl0ZWQgZGlyZWN0bHkhXG4gKiBUaGUgdW5jb21waWxlZCBzY3JpcHQgaXMgbG9jYXRlZCBpbiB0aGUgXCJhc3NldHMvcHJpdmF0ZVwiIGRpcmVjdG9yeVxuICogXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLyoqXG4gKiBMaWZ0ZXJMTVMgQWRtaW4gUGFuZWwgTWV0YWJveCBGdW5jdGlvbnNcbiAqIEBzaW5jZSAgICAzLjAuMFxuICogQHZlcnNpb24gIDMuMTguMlxuICovXG4oIGZ1bmN0aW9uKCAkICkge1xuXG5cdCQuZm4ubGxtc0NvbGxhcHNpYmxlID0gZnVuY3Rpb24oKSB7XG5cblx0XHR2YXIgJGdyb3VwID0gdGhpcztcblxuXHRcdHRoaXMub24oICdjbGljaycsICcubGxtcy1jb2xsYXBzaWJsZS1oZWFkZXInLCBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyICRwYXJlbnQgPSAkKCB0aGlzICkuY2xvc2VzdCggJy5sbG1zLWNvbGxhcHNpYmxlJyApLFxuXHRcdFx0XHQkc2libGluZ3MgPSAkcGFyZW50LnNpYmxpbmdzKCAnLmxsbXMtY29sbGFwc2libGUnICk7XG5cblx0XHRcdCRwYXJlbnQudG9nZ2xlQ2xhc3MoICdvcGVuZWQnICk7XG5cblx0XHRcdCRwYXJlbnQuZmluZCggJy5sbG1zLWNvbGxhcHNpYmxlLWJvZHknICkuc2xpZGVUb2dnbGUoIDQwMCApO1xuXG5cdFx0XHQkc2libGluZ3MuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCQoIHRoaXMgKS5yZW1vdmVDbGFzcyggJ29wZW5lZCcgKTtcblx0XHRcdFx0JCggdGhpcyApLmZpbmQoICcubGxtcy1jb2xsYXBzaWJsZS1ib2R5JyApLnNsaWRlVXAoIDQwMCApO1xuXHRcdFx0fSApO1xuXG5cdFx0fSApO1xuXG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0fTtcblxuXHR3aW5kb3cubGxtcyA9IHdpbmRvdy5sbG1zIHx8IHt9O1xuXG5cdHZhciBNZXRhYm94ZXMgPSBmdW5jdGlvbigpIHtcblxuXHRcdC8qKlxuXHRcdCAqIGxvYWQgYWxsIHBhcnRpYWxzXG5cdFx0ICovXG5cdFx0LyoqXG5cdFx0ICogTGlmdGVyTE1TIEFkbWluIE1ldGFib3ggUmVwZWF0ZXIgRmllbGRcblx0XHQgKiBAc2luY2UgICAgMy4xMS4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTcuM1xuXHRcdCAqL1xuXHRcdHRoaXMucmVwZWF0ZXJzID0ge1xuXHRcdFxuXHRcdFx0LyoqXG5cdFx0XHQgKiBSZWZlcmVuY2UgdG8gdGhlIHBhcmVudCBtZXRhYm94IGNsYXNzXG5cdFx0XHQgKiBAdHlwZSAgb2JqXG5cdFx0XHQgKi9cblx0XHRcdG1ldGFib3hlczogdGhpcyxcblx0XHRcblx0XHRcdC8qKlxuXHRcdFx0ICogalF1ZXJ5IHNlbGVjdG9yIGZvciBhbGwgcmVwZWF0ZXIgZWxlbWVudHMgb24gdGhlIGN1cnJlbnQgc2NyZWVuXG5cdFx0XHQgKiBAdHlwZSAge1t0eXBlXX1cblx0XHRcdCAqL1xuXHRcdFx0JHJlcGVhdGVyczogbnVsbCxcblx0XHRcblx0XHRcdC8qKlxuXHRcdFx0ICogSW5pdFxuXHRcdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHRcdCAqIEBzaW5jZSAgICAzLjExLjBcblx0XHRcdCAqIEB2ZXJzaW9uICAzLjE3LjNcblx0XHRcdCAqL1xuXHRcdFx0aW5pdDogZnVuY3Rpb24oKSB7XG5cdFx0XG5cdFx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcblx0XHRcdFx0c2VsZi4kcmVwZWF0ZXJzID0gJCggJy5sbG1zLW1iLWxpc3QucmVwZWF0ZXInICk7XG5cdFx0XG5cdFx0XHRcdGlmICggc2VsZi4kcmVwZWF0ZXJzLmxlbmd0aCApIHtcblx0XHRcblx0XHRcdFx0XHQvLyB3YWl0IGZvciB0aW55TUNFIGp1c3QgaW4gY2FzZSB0aGVpciBlZGl0b3JzIGluIHRoZSByZXBlYXRlcnNcblx0XHRcdFx0XHRMTE1TLndhaXRfZm9yKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdHJldHVybiAoICd1bmRlZmluZWQnICE9PSB0eXBlb2YgdGlueU1DRSApO1xuXHRcdFx0XHRcdH0sIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0c2VsZi5sb2FkKCk7XG5cdFx0XHRcdFx0XHRzZWxmLmJpbmQoKTtcblx0XHRcdFx0XHR9ICk7XG5cdFx0XG5cdFx0XHRcdFx0Ly8gb24gY2xpY2sgb2YgYW55IHBvc3Qgc3VibWl0IGJ1dHRvbnMgYWRkIHNvbWUgZGF0YSB0byB0aGUgc3VibWl0IGJ1dHRvblxuXHRcdFx0XHRcdC8vIHNvIHdlIGNhbiBzZWUgd2hpY2ggYnV0dG9uIHRvIHRyaWdnZXIgYWZ0ZXIgcmVwZWF0ZXJzIGFyZSBmaW5pc2hlZFxuXHRcdFx0XHRcdCQoICcjcG9zdCBpbnB1dFt0eXBlPVwic3VibWl0XCJdJyApLm9uKCAnY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdCQoIHRoaXMgKS5hdHRyKCAnZGF0YS1sbG1zLWNsaWNrZWQnLCAneWVzJyApO1xuXHRcdFx0XHRcdH0gKTtcblx0XHRcblx0XHRcdFx0XHQvLyBoYW5kbGUgcG9zdCBzdWJtaXNzaW9uXG5cdFx0XHRcdFx0JCggJyNwb3N0JyApLm9uKCAnc3VibWl0Jywgc2VsZi5oYW5kbGVfc3VibWl0ICk7XG5cdFx0XG5cdFx0XHRcdH1cblx0XHRcblx0XHRcdH0sXG5cdFx0XG5cdFx0XHQvKipcblx0XHRcdCAqIEJpbmQgRE9NIEV2ZW50c1xuXHRcdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHRcdCAqIEBzaW5jZSAgICAzLjExLjBcblx0XHRcdCAqIEB2ZXJzaW9uICAzLjEzLjBcblx0XHRcdCAqL1xuXHRcdFx0YmluZDogZnVuY3Rpb24oKSB7XG5cdFx0XG5cdFx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcblx0XHRcdFx0c2VsZi4kcmVwZWF0ZXJzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFxuXHRcdFx0XHRcdHZhciAkcmVwZWF0ZXIgPSAkKCB0aGlzICksXG5cdFx0XHRcdFx0XHQkcm93cyA9ICRyZXBlYXRlci5maW5kKCAnLmxsbXMtcmVwZWF0ZXItcm93cycgKSxcblx0XHRcdFx0XHRcdCRtb2RlbCA9ICRyZXBlYXRlci5maW5kKCAnLmxsbXMtcmVwZWF0ZXItbW9kZWwnICk7XG5cdFx0XG5cdFx0XHRcdFx0dGlueU1DRS5FZGl0b3JNYW5hZ2VyLmV4ZWNDb21tYW5kKCAnbWNlUmVtb3ZlRWRpdG9yJywgdHJ1ZSwgJG1vZGVsLmZpbmQoICcubGxtcy1tYi1saXN0LmVkaXRvciB0ZXh0YXJlYScgKS5hdHRyKCAnaWQnICkgKTtcblx0XHRcblx0XHRcdFx0XHQvLyBmb3IgdGhlIHJlcGVhdGVyICsgYnV0dG9uXG5cdFx0XHRcdFx0JHJlcGVhdGVyLmZpbmQoICcubGxtcy1yZXBlYXRlci1uZXctYnRuJyApLm9uKCAnY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdHNlbGYuYWRkX3JvdyggJHJlcGVhdGVyLCBudWxsLCB0cnVlICk7XG5cdFx0XHRcdFx0fSApO1xuXHRcdFxuXHRcdFx0XHRcdC8vIG1ha2UgcmVwZWF0ZXIgcm93cyBzb3J0YWJsZVxuXHRcdFx0XHRcdCRyb3dzLnNvcnRhYmxlKCB7XG5cdFx0XHRcdFx0XHRoYW5kbGU6ICcubGxtcy1kcmFnLWhhbmRsZScsXG5cdFx0XHRcdFx0XHRpdGVtczogJy5sbG1zLXJlcGVhdGVyLXJvdycsXG5cdFx0XHRcdFx0XHRzdGFydDogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHtcblx0XHRcdFx0XHRcdFx0JHJvd3MuYWRkQ2xhc3MoICdkcmFnZ2luZycgKTtcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRzdG9wOiBmdW5jdGlvbiggZXZlbnQsIHVpICkge1xuXHRcdFx0XHRcdFx0XHQkcm93cy5yZW1vdmVDbGFzcyggJ2RyYWdnaW5nJyApO1xuXHRcdFxuXHRcdFx0XHRcdFx0XHR2YXIgJGVkcyA9IHVpLml0ZW0uZmluZCggJ3RleHRhcmVhLndwLWVkaXRvci1hcmVhJyApO1xuXHRcdFx0XHRcdFx0XHQkZWRzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciBlZF9pZCA9ICQoIHRoaXMgKS5hdHRyKCAnaWQnICk7XG5cdFx0XHRcdFx0XHRcdFx0dGlueU1DRS5FZGl0b3JNYW5hZ2VyLmV4ZWNDb21tYW5kKCAnbWNlUmVtb3ZlRWRpdG9yJywgdHJ1ZSwgZWRfaWQgKTtcblx0XHRcdFx0XHRcdFx0XHR0aW55TUNFLkVkaXRvck1hbmFnZXIuZXhlY0NvbW1hbmQoICdtY2VBZGRFZGl0b3InLCB0cnVlLCBlZF9pZCApO1xuXHRcdFx0XHRcdFx0XHR9ICk7XG5cdFx0XG5cdFx0XHRcdFx0XHRcdHNlbGYuc2F2ZSggJHJlcGVhdGVyICk7XG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdH0gKTtcblx0XHRcblx0XHRcdFx0XHQkcmVwZWF0ZXIub24oICdjbGljaycsICcubGxtcy1yZXBlYXRlci1yZW1vdmUnLCBmdW5jdGlvbiggZSApIHtcblx0XHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdFx0XHR2YXIgJHJvdyA9ICQoIHRoaXMgKS5jbG9zZXN0KCAnLmxsbXMtcmVwZWF0ZXItcm93JyApO1xuXHRcdFx0XHRcdFx0aWYgKCB3aW5kb3cuY29uZmlybSggTExNUy5sMTBuLnRyYW5zbGF0ZSggJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyByb3c/IFRoaXMgY2Fubm90IGJlIHVuZG9uZS4nICkgKSApIHtcblx0XHRcdFx0XHRcdFx0JHJvdy5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0c2VsZi5zYXZlKCAkcmVwZWF0ZXIgKTtcblx0XHRcdFx0XHRcdFx0fSwgMSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gKTtcblx0XHRcblx0XHRcdFx0fSApO1xuXHRcdFxuXHRcdFx0fSxcblx0XHRcblx0XHRcdC8qKlxuXHRcdFx0ICogQWRkIGEgbmV3IHJvdyB0byBhIHJlcGVhdGVyIHJvd3MgZ3JvdXBcblx0XHRcdCAqIEBwYXJhbSAgICBvYmogICAgJHJlcGVhdGVyICBqUXVlcnkgc2VsZWN0b3IgZm9yIHRoZSByZXBlYXRlciB0byBhZGQgYSByb3cgdG9cblx0XHRcdCAqIEBwYXJhbSAgICBvYmogICAgZGF0YSAgICAgICBvcHRpb25hbCBvYmplY3Qgb2YgZGF0YSB0byBmaWxsIGZpZWxkcyBpbiB0aGUgcm93IHdpdGhcblx0XHRcdCAqIEBwYXJhbSAgICBib29sICAgZXhwYW5kICAgICBpZiB0cnVlLCB3aWxsIGF1dG9tYXRpY2FsbHkgb3BlbiB0aGUgcm93IGFmdGVyIGFkZGluZyBpdCB0byB0aGUgZG9tXG5cdFx0XHQgKiBAcmV0dXJuIFx0IHZvaWRcblx0XHRcdCAqIEBzaW5jZSAgICAzLjExLjBcblx0XHRcdCAqIEB2ZXJzaW9uICAzLjExLjBcblx0XHRcdCAqL1xuXHRcdFx0YWRkX3JvdzogZnVuY3Rpb24oICRyZXBlYXRlciwgZGF0YSwgZXhwYW5kICkge1xuXHRcdFxuXHRcdFx0XHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHRcdFx0JHJvd3MgPSAkcmVwZWF0ZXIuZmluZCggJy5sbG1zLXJlcGVhdGVyLXJvd3MnICksXG5cdFx0XHRcdFx0JG1vZGVsID0gJHJlcGVhdGVyLmZpbmQoICcubGxtcy1yZXBlYXRlci1tb2RlbCcgKSxcblx0XHRcdFx0XHQkcm93ID0gJG1vZGVsLmZpbmQoICcubGxtcy1yZXBlYXRlci1yb3cnICkuY2xvbmUoKSxcblx0XHRcdFx0XHRuZXdfaW5kZXggPSAkcmVwZWF0ZXIuZmluZCggJy5sbG1zLXJlcGVhdGVyLXJvdycgKS5sZW5ndGgsXG5cdFx0XHRcdFx0ZWRpdG9yID0gc2VsZi5yZWluZGV4KCAkcm93LCBuZXdfaW5kZXggKTtcblx0XHRcblx0XHRcdFx0aWYgKCBkYXRhICkge1xuXHRcdFx0XHRcdCQuZWFjaCggZGF0YSwgZnVuY3Rpb24oIGtleSwgdmFsICkge1xuXHRcdFxuXHRcdFx0XHRcdFx0dmFyICRmaWVsZCA9ICRyb3cuZmluZCggJ1tuYW1lXj1cIicgKyBrZXkgKyAnXCJdJyk7XG5cdFx0XG5cdFx0XHRcdFx0XHRpZiAoICRmaWVsZC5oYXNDbGFzcyggJ2xsbXMtc2VsZWN0Mi1zdHVkZW50JyApICkge1xuXHRcdFx0XHRcdFx0XHQkLmVhY2goIHZhbCwgZnVuY3Rpb24oIGksIGRhdGEgKSB7XG5cdFx0XHRcdFx0XHRcdFx0JGZpZWxkLmFwcGVuZCggJzxvcHRpb24gdmFsdWU9XCInICsgZGF0YS5rZXkgKyAnXCIgc2VsZWN0ZWQ9XCJzZWxlY3RlZFwiPicgKyBkYXRhLnRpdGxlICsgJzwvb3B0aW9uPicpXG5cdFx0XHRcdFx0XHRcdH0gKSA7XG5cdFx0XHRcdFx0XHRcdCRmaWVsZC50cmlnZ2VyKCAnY2hhbmdlJyApO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0JGZpZWxkLnZhbCggdmFsICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XG5cdFx0XG5cdFx0XHRcdFx0fSApO1xuXHRcdFx0XHR9XG5cdFx0XG5cdFx0XHRcdHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHNlbGYuYmluZF9yb3coICRyb3cgKTtcblx0XHRcdFx0fSwgMSApO1xuXHRcdFxuXHRcdFx0XHQkcm93cy5hcHBlbmQoICRyb3cgKTtcblx0XHRcdFx0aWYgKCBleHBhbmQgKSB7XG5cdFx0XHRcdFx0JHJvdy5maW5kKCAnLmxsbXMtY29sbGFwc2libGUtaGVhZGVyJyApLnRyaWdnZXIoICdjbGljaycgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aW55TUNFLkVkaXRvck1hbmFnZXIuZXhlY0NvbW1hbmQoICdtY2VBZGRFZGl0b3InLCB0cnVlLCBlZGl0b3IgKTtcblx0XHRcblx0XHRcdFx0JHJlcGVhdGVyLnRyaWdnZXIoICdsbG1zLW5ldy1yZXBlYXRlci1yb3cnLCB7XG5cdFx0XHRcdFx0JHJvdzogJHJvdyxcblx0XHRcdFx0XHRkYXRhOiBkYXRhLFxuXHRcdFx0XHR9ICk7XG5cdFx0XG5cdFx0XHR9LFxuXHRcdFxuXHRcdFx0LyoqXG5cdFx0XHQgKiBCaW5kIERPTSBldmVudHMgZm9yIGEgc2luZ2xlIHJlcGVhdGVyIHJvd1xuXHRcdFx0ICogQHBhcmFtICAgIG9iaiAgICRyb3cgIGpRdWVyeSBzZWxlY3RvciBmb3IgdGhlIHJvd1xuXHRcdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHRcdCAqIEBzaW5jZSAgICAzLjExLjBcblx0XHRcdCAqIEB2ZXJzaW9uICAzLjEzLjBcblx0XHRcdCAqL1xuXHRcdFx0YmluZF9yb3c6IGZ1bmN0aW9uKCAkcm93ICkge1xuXHRcdFxuXHRcdFx0XHR0aGlzLmJpbmRfcm93X2hlYWRlciggJHJvdyApO1xuXHRcdFxuXHRcdFx0XHQkcm93LmZpbmQoICcubGxtcy1zZWxlY3QyJyApLmxsbXNTZWxlY3QyKCB7XG5cdFx0XHRcdFx0d2lkdGg6ICcxMDAlJyxcblx0XHRcdFx0fSApO1xuXHRcdFxuXHRcdFx0XHQkcm93LmZpbmQoICcubGxtcy1zZWxlY3QyLXN0dWRlbnQnICkubGxtc1N0dWRlbnRzU2VsZWN0MigpO1xuXHRcdFxuXHRcdFx0XHR0aGlzLm1ldGFib3hlcy5iaW5kX2RhdGVwaWNrZXJzKCAkcm93LmZpbmQoICcubGxtcy1kYXRlcGlja2VyJyApICk7XG5cdFx0XHRcdHRoaXMubWV0YWJveGVzLmJpbmRfY29udHJvbGxlcnMoICRyb3cuZmluZCggJ1tkYXRhLWlzLWNvbnRyb2xsZXJdJyApICk7XG5cdFx0XHRcdC8vIHRoaXMubWV0YWJveGVzLmJpbmRfbWVyZ2VfY29kZV9idXR0b25zKCAkcm93LmZpbmQoICcubGxtcy1tZXJnZS1jb2RlLXdyYXBwZXInICkgKTtcblx0XHRcblx0XHRcdH0sXG5cdFx0XG5cdFx0XHQvKipcblx0XHRcdCAqIEJpbmQgcm93IGhlYWRlciBldmVudHNcblx0XHRcdCAqIEBwYXJhbSAgICBvYmogICAkcm93ICBqUXVlcnkgc2VsZWN0b3IgZm9yIHRoZSByb3dcblx0XHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0XHQgKiBAc2luY2UgICAgMy4xMS4wXG5cdFx0XHQgKiBAdmVyc2lvbiAgMy4xMS4wXG5cdFx0XHQgKi9cblx0XHRcdGJpbmRfcm93X2hlYWRlcjogZnVuY3Rpb24oICRyb3cgKSB7XG5cdFx0XG5cdFx0XHRcdC8vIGhhbmRsZSB0aGUgdGl0bGUgZmllbGQgYmluZGluZ1xuXHRcdFx0XHR2YXIgJHRpdGxlID0gJHJvdy5maW5kKCAnLmxsbXMtcmVwZWF0ZXItdGl0bGUnICksXG5cdFx0XHRcdFx0JGZpZWxkID0gJHJvdy5maW5kKCAnLmxsbXMtY29sbGFwc2libGUtaGVhZGVyLXRpdGxlLWZpZWxkJyApO1xuXHRcdFxuXHRcdFx0XHQkdGl0bGUuYXR0ciggJ2RhdGEtZGVmYXVsdCcsICR0aXRsZS50ZXh0KCkgKTtcblx0XHRcblx0XHRcdFx0JGZpZWxkLm9uKCAna2V5dXAgZm9jdXNvdXQgYmx1cicsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHZhciB2YWwgPSAkKCB0aGlzICkudmFsKCk7XG5cdFx0XHRcdFx0aWYgKCAhIHZhbCApIHtcblx0XHRcdFx0XHRcdHZhbCA9ICR0aXRsZS5hdHRyKCAnZGF0YS1kZWZhdWx0JyApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQkdGl0bGUudGV4dCggdmFsICk7XG5cdFx0XHRcdH0gKS50cmlnZ2VyKCAna2V5dXAnICk7XG5cdFx0XG5cdFx0XHR9LFxuXHRcdFxuXHRcdFx0LyoqXG5cdFx0XHQgKiBIYW5kbGUgV1AgUG9zdCBmb3JtIHN1Ym1pc3Npb24gdG8gZW5zdXJlIHJlcGVhdGVycyBhcmUgc2F2ZWQgYmVmb3JlIHN1Ym1pdHRpbmcgdGhlIGZvcm0gdG8gc2F2ZS9wdWJsaXNoIHRoZSBwb3N0XG5cdFx0XHQgKiBAcGFyYW0gICAgb2JqICAgZSAgSlMgZXZlbnQgb2JqZWN0XG5cdFx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdFx0ICogQHNpbmNlICAgIDMuMTEuMFxuXHRcdFx0ICogQHZlcnNpb24gIDMuMTcuM1xuXHRcdFx0ICovXG5cdFx0XHRoYW5kbGVfc3VibWl0OiBmdW5jdGlvbiggZSApIHtcblx0XHRcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFxuXHRcdFx0XHQvLyBnZXQgdGhlIGJ1dHRvbiB1c2VkIHRvIHN1Ym1pdCB0aGUgZm9ybVxuXHRcdFx0XHR2YXIgJGJ0biA9ICQoICcjcG9zdCBbZGF0YS1sbG1zLWNsaWNrZWQ9XCJ5ZXNcIl0nICksXG5cdFx0XHRcdFx0JHNwaW5uZXIgPSAkYnRuLnBhcmVudCgpLmZpbmQoICcuc3Bpbm5lcicgKTtcblx0XHRcblx0XHRcdFx0Ly8gY29yZSBVWCB0byBwcmV2ZW50IG11bHRpLWNsaWNrL29yIHRoZSBhcHBlYXJhbmNlIG9mIGEgZGVsYXlcblx0XHRcdFx0JCggJyNwb3N0IGlucHV0W3R5cGU9XCJzdWJtaXRcIl0nICkuYWRkQ2xhc3MoICdkaXNhYmxlZCcgKTtcblx0XHRcdFx0JHNwaW5uZXIuYWRkQ2xhc3MoICdpcy1hY3RpdmUnICk7XG5cdFx0XG5cdFx0XHRcdHZhciBzZWxmID0gd2luZG93LmxsbXMubWV0YWJveGVzLnJlcGVhdGVycyxcblx0XHRcdFx0XHRpID0gMCxcblx0XHRcdFx0XHR3YWl0O1xuXHRcdFxuXHRcdFx0XHRzZWxmLiRyZXBlYXRlcnMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0c2VsZi5zYXZlKCAkKCB0aGlzICkgKTtcblx0XHRcdFx0fSApO1xuXHRcdFxuXHRcdFx0XHR3YWl0ID0gc2V0SW50ZXJ2YWwoIGZ1bmN0aW9uKCkge1xuXHRcdFxuXHRcdFx0XHRcdGlmICggaSA+PSA1OSB8fCAhICQoICcubGxtcy1tYi1saXN0LnJlcGVhdGVyLnByb2Nlc3NpbmcnICkubGVuZ3RoICkge1xuXHRcdFxuXHRcdFx0XHRcdFx0Y2xlYXJJbnRlcnZhbCggd2FpdCApO1xuXHRcdFx0XHRcdFx0JCggJyNwb3N0JyApLm9mZiggJ3N1Ym1pdCcsIHRoaXMuaGFuZGxlX3N1Ym1pdCApO1xuXHRcdFx0XHRcdFx0JHNwaW5uZXIucmVtb3ZlQ2xhc3MoICdpcy1hY3RpdmUnICk7XG5cdFx0XHRcdFx0XHQkYnRuLnJlbW92ZUNsYXNzKCAnZGlzYWJsZWQnICkudHJpZ2dlciggJ2NsaWNrJyApO1xuXHRcdFxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XG5cdFx0XHRcdFx0XHRpKys7XG5cdFx0XG5cdFx0XHRcdFx0fVxuXHRcdFxuXHRcdFx0XHR9LCAxMDAwICk7XG5cdFx0XG5cdFx0XG5cdFx0XHR9LFxuXHRcdFxuXHRcdFx0LyoqXG5cdFx0XHQgKiBMb2FkIHJlcGVyZWF0ZXIgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIgYW5kIGNyZWF0ZSByb3dzIGluIHRoZSBET01cblx0XHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0XHQgKiBAc2luY2UgICAgMy4xMS4wXG5cdFx0XHQgKiBAdmVyc2lvbiAgMy4xMi4xXG5cdFx0XHQgKi9cblx0XHRcdGxvYWQ6IGZ1bmN0aW9uKCkge1xuXHRcdFxuXHRcdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0XG5cdFx0XHRcdHNlbGYuJHJlcGVhdGVycy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcblx0XHRcdFx0XHR2YXIgJHJlcGVhdGVyID0gJCggdGhpcyApO1xuXHRcdFxuXHRcdFx0XHRcdC8vIGVuc3VyZSB0aGUgcmVwZWF0ZXIgaXMgb25seSBsb2FkZWQgb25jZSB0byBwcmV2ZW50IGR1cGxpY2F0ZXMgcmVzdWx0aW5nIGZyb20gZHVwbGljYXRpbmcgYmluZGluZ1xuXHRcdFx0XHRcdC8vIG9uIGNlcnRhaW4gc2l0ZXMgd2hpY2ggSSBjYW5ub3QgcXVpdGUgZXhwbGFpbi4uLlxuXHRcdFx0XHRcdGlmICggJHJlcGVhdGVyLmhhc0NsYXNzKCAnaXMtbG9hZGVkJyApIHx8ICRyZXBlYXRlci5oYXNDbGFzcyggJ3Byb2Nlc3NpbmcnICkgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFxuXHRcdFx0XHRcdHNlbGYuc3RvcmUoICRyZXBlYXRlciwgJ2xvYWQnLCBmdW5jdGlvbiggZGF0YSApIHtcblx0XHRcblx0XHRcdFx0XHRcdCRyZXBlYXRlci5hZGRDbGFzcyggJ2lzLWxvYWRlZCcgKTtcblx0XHRcblx0XHRcdFx0XHRcdCQuZWFjaCggZGF0YS5kYXRhLCBmdW5jdGlvbiggaSwgb2JqICkge1xuXHRcdFx0XHRcdFx0XHRzZWxmLmFkZF9yb3coICRyZXBlYXRlciwgb2JqLCBmYWxzZSApO1xuXHRcdFx0XHRcdFx0fSApO1xuXHRcdFxuXHRcdFx0XHRcdFx0Ly8gZm9yIGVhY2ggcm93IHdpdGhpbiB0aGUgcmVwZWF0ZXJcblx0XHRcdFx0XHRcdCRyZXBlYXRlci5maW5kKCAnLmxsbXMtcmVwZWF0ZXItcm93cyAubGxtcy1yZXBlYXRlci1yb3cnICkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdHNlbGYuYmluZF9yb3coICQoIHRoaXMgKSApO1xuXHRcdFx0XHRcdFx0fSApO1xuXHRcdFxuXHRcdFx0XHRcdH0gKTtcblx0XHRcblx0XHRcblx0XHRcblx0XHRcdFx0fSApO1xuXHRcdFxuXHRcdFx0fSxcblx0XHRcblx0XHRcdC8qKlxuXHRcdFx0ICogUmVpbmRleCBhIHJvd1xuXHRcdFx0ICogcmVuYW1lcyBpZHMsIGF0dHJzLCBhbmQgZXRjLi4uXG5cdFx0XHQgKiBVc2VkIHdoZW4gY2xvbmluZyB0aGUgbW9kZWwgZm9yIG5ldyByb3dzXG5cdFx0XHQgKiBAcGFyYW0gICAgb2JqICAgICAgICAgICRyb3cgIGpRdWVyeSBzZWxlY3RvciBmb3IgdGhlIHJvd1xuXHRcdFx0ICogQHBhcmFtICAgIGludHxzdHJpbmcgICBpbmRleCAgaW5kZXggKG9yIGlkKSB0byB1c2Ugd2hlbiByZW5hbWluZ1xuXHRcdFx0ICogQHJldHVybiAgIHN0cmluZ1xuXHRcdFx0ICogQHNpbmNlICAgIDMuMTEuMFxuXHRcdFx0ICogQHZlcnNpb24gIDMuMTEuMFxuXHRcdFx0ICovXG5cdFx0XHRyZWluZGV4OiBmdW5jdGlvbiggJHJvdywgaW5kZXggKSB7XG5cdFx0XG5cdFx0XHRcdHZhciBvbGRfaW5kZXggPSAkcm93LmF0dHIoICdkYXRhLXJvdy1vcmRlcicgKSxcblx0XHRcdFx0XHQkZWQgPSAkcm93LmZpbmQoICcubGxtcy1tYi1saXN0LmVkaXRvciB0ZXh0YXJlYScgKTtcblx0XHRcblx0XHRcdFx0dGlueU1DRS5FZGl0b3JNYW5hZ2VyLmV4ZWNDb21tYW5kKCAnbWNlUmVtb3ZlRWRpdG9yJywgdHJ1ZSwgJGVkLmF0dHIoICdpZCcgKSApO1xuXHRcdFxuXHRcdFx0XHRmdW5jdGlvbiByZXBsYWNlX2F0dHIoICRlbCwgYXR0ciApIHtcblx0XHRcdFx0XHQkZWwuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHR2YXIgc3RyID0gJCggdGhpcyApLmF0dHIoIGF0dHIgKTtcblx0XHRcdFx0XHRcdCQoIHRoaXMgKS5hdHRyKCBhdHRyLCBzdHIucmVwbGFjZSggb2xkX2luZGV4LCBpbmRleCApICk7XG5cdFx0XHRcdFx0fSApO1xuXHRcdFx0XHR9O1xuXHRcdFxuXHRcdFx0XHQkcm93LmF0dHIoICdkYXRhLXJvdy1vcmRlcicsIGluZGV4ICk7XG5cdFx0XG5cdFx0XHRcdHJlcGxhY2VfYXR0ciggJHJvdywgJ2RhdGEtcm93LW9yZGVyJyApO1xuXHRcdFxuXHRcdFx0XHRyZXBsYWNlX2F0dHIoICRyb3cuZmluZCggJ2J1dHRvbi5pbnNlcnQtbWVkaWEnICksICdkYXRhLWVkaXRvcicgKTtcblx0XHRcblx0XHRcdFx0cmVwbGFjZV9hdHRyKCAkcm93LmZpbmQoICdpbnB1dFtuYW1lXj1cIl9sbG1zXCJdLCB0ZXh0YXJlYVtuYW1lXj1cIl9sbG1zXCJdLCBzZWxlY3RbbmFtZV49XCJfbGxtc1wiXScgKSwgJ2lkJyApO1xuXHRcdFx0XHRyZXBsYWNlX2F0dHIoICRyb3cuZmluZCggJ2lucHV0W25hbWVePVwiX2xsbXNcIl0sIHRleHRhcmVhW25hbWVePVwiX2xsbXNcIl0sIHNlbGVjdFtuYW1lXj1cIl9sbG1zXCJdJyApLCAnbmFtZScgKTtcblx0XHRcdFx0cmVwbGFjZV9hdHRyKCAkcm93LmZpbmQoICdbZGF0YS1jb250cm9sbGVyXScgKSwgJ2RhdGEtY29udHJvbGxlcicgKTtcblx0XHRcdFx0cmVwbGFjZV9hdHRyKCAkcm93LmZpbmQoICdbZGF0YS1jb250cm9sbGVyXScgKSwgJ2RhdGEtY29udHJvbGxlcicgKTtcblx0XHRcdFx0cmVwbGFjZV9hdHRyKCAkcm93LmZpbmQoICdidXR0b24ud3Atc3dpdGNoLWVkaXRvcicgKSwgJ2RhdGEtd3AtZWRpdG9yLWlkJyApO1xuXHRcdFx0XHRyZXBsYWNlX2F0dHIoICRyb3cuZmluZCggJ2J1dHRvbi53cC1zd2l0Y2gtZWRpdG9yJyApLCAnaWQnICk7XG5cdFx0XHRcdHJlcGxhY2VfYXR0ciggJHJvdy5maW5kKCAnLndwLWVkaXRvci10b29scycgKSwgJ2lkJyApO1xuXHRcdFx0XHRyZXBsYWNlX2F0dHIoICRyb3cuZmluZCggJy53cC1lZGl0b3ItY29udGFpbmVyJyApLCAnaWQnICk7XG5cdFx0XG5cdFx0XG5cdFx0XHRcdHJldHVybiAkZWQuYXR0ciggJ2lkJyApO1xuXHRcdFxuXHRcdFx0fSxcblx0XHRcblx0XHRcdC8qKlxuXHRcdFx0ICogU2F2ZSBhIHNpbmdsZSByZXBlYXRlcnMgZGF0YSB0byB0aGUgc2VydmVyXG5cdFx0XHQgKiBAcGFyYW0gICAgb2JqICAgJHJlcGVhdGVyICBqUXVlcnkgc2VsZWN0b3IgZm9yIGEgcmVwZWF0ZXIgZWxlbWVudFxuXHRcdFx0ICogQHJldHVybiAgIHZvaXNcblx0XHRcdCAqIEBzaW5jZSAgICAzLjExLjBcblx0XHRcdCAqIEB2ZXJzaW9uICAzLjEzLjBcblx0XHRcdCAqL1xuXHRcdFx0c2F2ZTogZnVuY3Rpb24oICRyZXBlYXRlciApIHtcblx0XHRcdFx0JHJlcGVhdGVyLnRyaWdnZXIoICdsbG1zLXJlcGVhdGVyLWJlZm9yZS1zYXZlJywgeyAkZWw6ICRyZXBlYXRlciB9ICk7XG5cdFx0XHRcdHRoaXMuc3RvcmUoICRyZXBlYXRlciwgJ3NhdmUnICk7XG5cdFx0XHR9LFxuXHRcdFxuXHRcdFx0LyoqXG5cdFx0XHQgKiBDb252ZXJ0IGEgcmVwZWF0ZXIgZWxlbWVudCBpbnRvIGFuIGFycmF5IG9mIG9iamVjdHMgdGhhdCBjYW4gYmUgc2F2ZWQgdG8gdGhlIGRhdGFiYXNlXG5cdFx0XHQgKiBAcGFyYW0gICAgb2JqICAgJHJlcGVhdGVyICBqUXVlcnkgc2VsZWN0b3IgZm9yIGEgcmVwZWF0ZXIgZWxlbWVudFxuXHRcdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHRcdCAqIEBzaW5jZSAgICAzLjExLjBcblx0XHRcdCAqIEB2ZXJzaW9uICAzLjExLjBcblx0XHRcdCAqL1xuXHRcdFx0c2VyaWFsaXplOiBmdW5jdGlvbiggJHJlcGVhdGVyICkge1xuXHRcdFxuXHRcdFx0XHR2YXIgcm93cyA9IFtdO1xuXHRcdFxuXHRcdFx0XHQkcmVwZWF0ZXIuZmluZCggJy5sbG1zLXJlcGVhdGVyLXJvd3MgLmxsbXMtcmVwZWF0ZXItcm93JyApLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFxuXHRcdFx0XHRcdHZhciBvYmogPSB7fTtcblx0XHRcblx0XHRcdFx0XHQvLyBlYXN5Li4uXG5cdFx0XHRcdFx0JCggdGhpcyApLmZpbmQoICdpbnB1dFtuYW1lXj1cIl9sbG1zXCJdLCBzZWxlY3RbbmFtZV49XCJfbGxtc1wiXScgKS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdG9ialsgJCggdGhpcyApLmF0dHIoICduYW1lJyApIF0gPSAkKCB0aGlzICkudmFsKCk7XG5cdFx0XHRcdFx0fSApO1xuXHRcdFxuXHRcdFx0XHRcdC8vIGNoZWNrIGlmIHRoZSB0ZXh0YXJlYSBpcyBhIHRpbnlNQ0UgaW5zdGFuY2Vcblx0XHRcdFx0XHQkKCB0aGlzICkuZmluZCggJ3RleHRhcmVhW25hbWVePVwiX2xsbXNcIl0nICkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XG5cdFx0XHRcdFx0XHR2YXIgbmFtZSA9ICQoIHRoaXMgKS5hdHRyKCAnbmFtZScgKTtcblx0XHRcblx0XHRcdFx0XHRcdC8vIGlmIGl0IGlzIGFuIGVkaXRvclxuXHRcdFx0XHRcdFx0aWYgKCB0aW55TUNFLmVkaXRvcnNbIG5hbWUgXSApIHtcblx0XHRcdFx0XHRcdFx0b2JqWyBuYW1lIF0gPSB0aW55TUNFLmVkaXRvcnNbIG5hbWUgXS5nZXRDb250ZW50KCk7XG5cdFx0XHRcdFx0XHQvLyBncmFiIHRoZSB2YWwgb2YgdGhlIHRleHRhcmVhXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRvYmpbIG5hbWUgXSA9ICQoIHRoaXMgKS52YWwoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcblx0XHRcdFx0XHR9ICk7XG5cdFx0XG5cdFx0XHRcdFx0cm93cy5wdXNoKCBvYmogKTtcblx0XHRcblx0XHRcdFx0fSApO1xuXHRcdFxuXHRcdFx0XHRyZXR1cm4gcm93cztcblx0XHRcblx0XHRcdH0sXG5cdFx0XG5cdFx0XHQvKipcblx0XHRcdCAqIEFKQVggbWV0aG9kIGZvciBpbnRlcmFjdGluZyB3aXRoIHRoZSByZXBlYXRlcidzIGhhbmRsZXIgb24gdGhlIHNlcnZlclxuXHRcdFx0ICogQHBhcmFtICAgIG9iaiAgICAgICAkcmVwZWF0ZXIgIGpRdWVyeSBzZWxlY3RvciBmb3IgdGhlIHJlcGVhdGVyIGVsZW1lbnRcblx0XHRcdCAqIEBwYXJhbSAgICBzdHJpbmcgICAgYWN0aW9uICAgICBhY3Rpb24gdG8gY2FsbCBbc2F2ZXxsb2FkXVxuXHRcdFx0ICogQHBhcmFtICAgIGZ1bmN0aW9uICBjYiAgICAgICAgIGNhbGxiYWNrIGZ1bmN0aW9uXG5cdFx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdFx0ICogQHNpbmNlICAgIDMuMTEuMFxuXHRcdFx0ICogQHZlcnNpb24gIDMuMTEuMFxuXHRcdFx0ICovXG5cdFx0XHRzdG9yZTogZnVuY3Rpb24oICRyZXBlYXRlciwgYWN0aW9uLCBjYiApIHtcblx0XHRcblx0XHRcdFx0Y2IgPSBjYiB8fCBmdW5jdGlvbigpe307XG5cdFx0XHRcdHZhciBzZWxmID0gdGhpcyxcblx0XHRcdFx0XHRkYXRhID0ge1xuXHRcdFx0XHRcdFx0YWN0aW9uOiAkcmVwZWF0ZXIuZmluZCggJy5sbG1zLXJlcGVhdGVyLWZpZWxkLWhhbmRsZXInICkudmFsKCksXG5cdFx0XHRcdFx0XHRzdG9yZV9hY3Rpb246IGFjdGlvbixcblx0XHRcdFx0XHR9O1xuXHRcdFxuXHRcdFx0XHRpZiAoICdzYXZlJyA9PT0gYWN0aW9uICkge1xuXHRcdFx0XHRcdGRhdGEucm93cyA9IHNlbGYuc2VyaWFsaXplKCAkcmVwZWF0ZXIgKTtcblx0XHRcdFx0fVxuXHRcdFxuXHRcdFx0XHRMTE1TLkFqYXguY2FsbCgge1xuXHRcdFx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRcdFx0YmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7XG5cdFx0XG5cdFx0XHRcdFx0XHQkcmVwZWF0ZXIuYWRkQ2xhc3MoICdwcm9jZXNzaW5nJyApO1xuXHRcdFx0XHRcdFx0TExNUy5TcGlubmVyLnN0YXJ0KCAkcmVwZWF0ZXIgKTtcblx0XHRcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKCByICkge1xuXHRcdFxuXHRcdFx0XHRcdFx0Y2IoIHIgKTtcblx0XHRcdFx0XHRcdExMTVMuU3Bpbm5lci5zdG9wKCAkcmVwZWF0ZXIgKTtcblx0XHRcdFx0XHRcdCRyZXBlYXRlci5yZW1vdmVDbGFzcyggJ3Byb2Nlc3NpbmcnICk7XG5cdFx0XG5cdFx0XHRcdFx0fVxuXHRcdFxuXHRcdFx0XHR9ICk7XG5cdFx0XG5cdFx0XHR9LFxuXHRcdFxuXHRcdH07XG5cdFx0dGhpcy5yZXBlYXRlcnMuaW5pdCgpO1xuXHRcdFxuXG5cblx0XHQvKipcblx0XHQgKiBJbml0aWFsaXplXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMy4wLjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xMy4wXG5cdFx0ICovXG5cdFx0dGhpcy5pbml0ID0gZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0JCggJy5sbG1zLXNlbGVjdDItcG9zdCcgKS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0c2VsZi5wb3N0X3NlbGVjdCggJCggdGhpcyApICk7XG5cdFx0XHR9ICk7XG5cblx0XHRcdCQoICcubGxtcy1jb2xsYXBzaWJsZS1ncm91cCcgKS5sbG1zQ29sbGFwc2libGUoKTtcblxuXHRcdFx0dGhpcy5iaW5kX3RhYnMoKTtcblxuXHRcdFx0Ly8gYmluZCBldmVyeXRoaW5nIGJldHRlciBhbmQgbGVzcyByZXBldGF0aXZlbHkuLi5cblx0XHRcdHZhciBiaW5kaW5ncyA9IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHNlbGVjdG9yOiAkKCAnLmxsbXMtZGF0ZXBpY2tlcicgKSxcblx0XHRcdFx0XHRmdW5jOiAnYmluZF9kYXRlcGlja2VycycsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRzZWxlY3RvcjogJCggJy5sbG1zLXNlbGVjdDInICksXG5cdFx0XHRcdFx0ZnVuYzogZnVuY3Rpb24oICRzZWxlY3RvciApIHtcblx0XHRcdFx0XHRcdCRzZWxlY3Rvci5sbG1zU2VsZWN0Migge1xuXHRcdFx0XHRcdFx0XHR3aWR0aDogJzEwMCUnLFxuXHRcdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRzZWxlY3RvcjogJCggJy5sbG1zLXNlbGVjdDItc3R1ZGVudCcgKSxcblx0XHRcdFx0XHRmdW5jOiBmdW5jdGlvbiggJHNlbGVjdG9yICkge1xuXHRcdFx0XHRcdFx0JHNlbGVjdG9yLmxsbXNTdHVkZW50c1NlbGVjdDIoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRzZWxlY3RvcjogJCggJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXVtkYXRhLWNvbnRyb2xzXScgKSxcblx0XHRcdFx0XHRmdW5jOiAnYmluZF9jYl9jb250cm9sbGVycycsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRzZWxlY3RvcjogJCggJ1tkYXRhLWlzLWNvbnRyb2xsZXJdJyApLFxuXHRcdFx0XHRcdGZ1bmM6ICdiaW5kX2NvbnRyb2xsZXJzJyxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHNlbGVjdG9yOiAkKCAnLmxsbXMtdGFibGUnICksXG5cdFx0XHRcdFx0ZnVuYzogJ2JpbmRfdGFibGVzJyxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHNlbGVjdG9yOiAkKCAnLmxsbXMtbWVyZ2UtY29kZS13cmFwcGVyJyApLFxuXHRcdFx0XHRcdGZ1bmM6ICdiaW5kX21lcmdlX2NvZGVfYnV0dG9ucycsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRzZWxlY3RvcjogJCggJ2EubGxtcy1lZGl0YWJsZScgKSxcblx0XHRcdFx0XHRmdW5jOiAnYmluZF9lZGl0YWJsZXMnLFxuXHRcdFx0XHR9LFxuXHRcdFx0XTtcblxuXHRcdFx0Ly8gYmluZCBhbGwgdGhlIGJpbmRhYmxlcyBidXQgZG9uJ3QgYmluZCB0aGluZ3MgaW4gcmVwZWF0ZXJzXG5cdFx0XHQkLmVhY2goIGJpbmRpbmdzLCBmdW5jdGlvbiggaW5kZXgsIG9iaiApIHtcblxuXHRcdFx0XHRpZiAoIG9iai5zZWxlY3Rvci5sZW5ndGggKSB7XG5cblx0XHRcdFx0XHQvLyByZWR1Y2UgdGhlIHNlbGVjdG9yIHRvIGV4Y2x1ZGUgaXRlbXMgaW4gYSByZXBlYXRlclxuXHRcdFx0XHRcdHZhciByZWR1Y2VkID0gb2JqLnNlbGVjdG9yLmZpbHRlciggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gKCAwID09PSAkKCB0aGlzICkuY2xvc2VzdCggJy5sbG1zLXJlcGVhdGVyLW1vZGVsJyApLmxlbmd0aCApO1xuXHRcdFx0XHRcdH0gKTtcblxuXHRcdFx0XHRcdC8vIGJpbmQgYnkgc3RyaW5nXG5cdFx0XHRcdFx0aWYgKCAnc3RyaW5nJyA9PT0gdHlwZW9mIG9iai5mdW5jICkge1xuXHRcdFx0XHRcdFx0c2VsZlsgb2JqLmZ1bmMgXSggcmVkdWNlZCApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvLyBiaW5kIGJ5IGFuIGFub255bW91cyBmdW5jdGlvblxuXHRcdFx0XHRcdGVsc2UgaWYgKCAnZnVuY3Rpb24nID09PSB0eXBlb2Ygb2JqLmZ1bmMgKSB7XG5cdFx0XHRcdFx0XHRvYmouZnVuYyggcmVkdWNlZCApO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdH0gKTtcblxuXHRcdFx0Ly8gaWYgYSBwb3N0IHR5cGUgaXMgc2V0ICYgYSBiaW5kIGV4aXN0cyBmb3IgaXQsIGJpbmQgaXRcblx0XHRcdGlmICggd2luZG93LmxsbXMucG9zdC5wb3N0X3R5cGUgKSB7XG5cblx0XHRcdFx0dmFyIGZ1bmMgPSAnYmluZF8nICsgd2luZG93LmxsbXMucG9zdC5wb3N0X3R5cGU7XG5cblx0XHRcdFx0aWYgKCAnZnVuY3Rpb24nID09PSB0eXBlb2YgdGhpc1tmdW5jXSApIHtcblxuXHRcdFx0XHRcdHRoaXNbZnVuY10oKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdH07XG5cblx0XHQvKipcblx0XHQgKiBCaW5kIGNoZWNrYm94ZXMgdGhhdCBjb250cm9sIHRoZSBkaXNwbGF5IG9mIG90aGVyIGVsZW1lbnRzXG5cdFx0ICogQHBhcmFtICAgIG9iaiAgICRjb250cm9sbGVyc3MgIGpRdWVyeSBzZWxjdG9yIGZvciBjaGVja2JveGVzIHRvIGJlIGJvdW5kIGFzIGNoZWNrYm94IGNvbnRyb2xsZXJzXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMy4wLjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xMS4wXG5cdFx0ICovXG5cdFx0dGhpcy5iaW5kX2NiX2NvbnRyb2xsZXJzID0gZnVuY3Rpb24oICRjb250cm9sbGVycyApIHtcblxuXHRcdFx0JGNvbnRyb2xsZXJzID0gJGNvbnRyb2xsZXJzIHx8ICQoICdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl1bZGF0YS1jb250cm9sc10nICk7XG5cblx0XHRcdCRjb250cm9sbGVycy5lYWNoKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHR2YXIgJGNiID0gJCggdGhpcyApLFxuXHRcdFx0XHRcdCRjb250cm9sbGVkID0gJCggJGNiLmF0dHIoICdkYXRhLWNvbnRyb2xzJyApICkuY2xvc2VzdCggJy5sbG1zLW1iLWxpc3QnICk7XG5cblx0XHRcdFx0JGNiLm9uKCAnY2hhbmdlJywgZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0XHRpZiAoICQoIHRoaXMgKS5pcyggJzpjaGVja2VkJyApICkge1xuXG5cdFx0XHRcdFx0XHQkY29udHJvbGxlZC5zbGlkZURvd24oIDIwMCApO1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0JGNvbnRyb2xsZWQuc2xpZGVVcCggMjAwICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdCRjYi50cmlnZ2VyKCAnY2hhbmdlJyApO1xuXG5cdFx0XHR9ICk7XG5cblx0XHR9O1xuXG5cdFx0LyoqXG5cdFx0ICogQmluZCBlbGVtZW50cyB0aGF0IGNvbnRyb2wgdGhlIGRpc3BsYXkgb2Ygb3RoZXIgZWxlbWVudHNcblx0XHQgKiBAcGFyYW0gICAgb2JqICAgJGNvbnRyb2xsZXJzcyAgalF1ZXJ5IHNlbGN0b3IgZm9yIGVsZW1lbnRzIHRvIGJlIGJvdW5kIGFzIGNoZWNrYm94IGNvbnRyb2xsZXJzXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMy4wLjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xMS4wXG5cdFx0ICovXG5cdFx0dGhpcy5iaW5kX2NvbnRyb2xsZXJzID0gZnVuY3Rpb24oICRjb250cm9sbGVycyApIHtcblxuXHRcdFx0JGNvbnRyb2xsZXJzID0gJGNvbnRyb2xsZXJzIHx8ICQoICdbZGF0YS1pcy1jb250cm9sbGVyXScgKTtcblxuXHRcdFx0JGNvbnRyb2xsZXJzLmVhY2goIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdHZhciAkZWwgPSAkKCB0aGlzICksXG5cdFx0XHRcdFx0JGNvbnRyb2xsZWQgPSAkKCAnW2RhdGEtY29udHJvbGxlcj1cIiMnICsgJGVsLmF0dHIoICdpZCcgKSArICdcIl0nICksXG5cdFx0XHRcdFx0dmFsO1xuXG5cdFx0XHRcdCRlbC5vbiggJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdFx0aWYgKCAnY2hlY2tib3gnID09PSAkZWwuYXR0ciggJ3R5cGUnICkgKSB7XG5cblx0XHRcdFx0XHRcdHZhbCA9ICRlbC5pcyggJzpjaGVja2VkJyApID8gJGVsLnZhbCgpIDogJ2ZhbHNlJztcblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdHZhbCA9ICRlbC52YWwoKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdCRjb250cm9sbGVkLmVhY2goIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdFx0XHR2YXIgcG9zc2libGUgPSAkKCB0aGlzICkuYXR0ciggJ2RhdGEtY29udHJvbGxlci12YWx1ZScgKSxcblx0XHRcdFx0XHRcdFx0dmFscyA9IFtdO1xuXG5cdFx0XHRcdFx0XHRpZiAoIC0xICE9PSBwb3NzaWJsZS5pbmRleE9mKCAnLCcgKSApIHtcblxuXHRcdFx0XHRcdFx0XHR2YWxzID0gcG9zc2libGUuc3BsaXQoICcsJyApO1xuXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdHZhbHMucHVzaCggcG9zc2libGUgKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpZiAoIC0xICE9PSB2YWxzLmluZGV4T2YoIHZhbCApICkge1xuXG5cdFx0XHRcdFx0XHRcdCQoIHRoaXMgKS5zbGlkZURvd24oIDIwMCApO1xuXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdCQoIHRoaXMgKS5zbGlkZVVwKCAyMDAgKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0fSApO1xuXG5cblx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdCRlbC50cmlnZ2VyKCAnY2hhbmdlJyApO1xuXG5cdFx0XHR9ICk7XG5cblx0XHR9O1xuXG5cdFx0LyoqXG5cdFx0ICogQmluZCBhIHNpbmdsZSBkYXRlcGlja2VyIGVsZW1lbnRcblx0XHQgKiBAcGFyYW0gICAgb2JqICAgJGVsICBqUXVlcnkgc2VsZWN0b3IgZm9yIHRoZSBpbnB1dCB0byBiaW5kIHRoZSBkYXRlcGlja2VyIHRvXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMy4wLjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xMC4wXG5cdFx0ICovXG5cdFx0dGhpcy5iaW5kX2RhdGVwaWNrZXIgPSBmdW5jdGlvbiggJGVsICkge1xuXHRcdFx0dmFyIGZvcm1hdCA9ICRlbC5hdHRyKCAnZGF0YS1mb3JtYXQnICkgfHwgJ21tL2RkL3l5Jyxcblx0XHRcdFx0bWF4RGF0ZSA9ICRlbC5hdHRyKCAnZGF0YS1tYXgtZGF0ZScgKSB8fCBudWxsLFxuXHRcdFx0XHRtaW5EYXRlID0gJGVsLmF0dHIoICdkYXRhLW1pbi1kYXRlJyApIHx8IG51bGw7XG5cdFx0XHQkZWwuZGF0ZXBpY2tlcigge1xuXHRcdFx0XHRkYXRlRm9ybWF0OiBmb3JtYXQsXG5cdFx0XHRcdG1heERhdGU6IG1heERhdGUsXG5cdFx0XHRcdG1pbkRhdGU6IG1pbkRhdGUsXG5cdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogQmluZCBhbGwgTGlmdGVyTE1TIGRhdGVwaWNrZXJzXG5cdFx0ICogQHBhcmFtICAgIG9iaiAgICRkYXRlcGlja2VycyAgalF1ZXJ5IHNlbGVjdG9yIGZvciB0aGUgZWxlbWVudHMgdG8gYmluZFxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMC4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTEuMFxuXHRcdCAqL1xuXHRcdHRoaXMuYmluZF9kYXRlcGlja2VycyA9IGZ1bmN0aW9uKCAkZGF0ZXBpY2tlcnMgKSB7XG5cblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0JGRhdGVwaWNrZXJzID0gJGRhdGVwaWNrZXJzIHx8ICQoJy5sbG1zLWRhdGVwaWNrZXInKTtcblxuXHRcdFx0JGRhdGVwaWNrZXJzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRzZWxmLmJpbmRfZGF0ZXBpY2tlciggJCggdGhpcyApICk7XG5cdFx0XHR9ICk7XG5cblx0XHR9O1xuXG5cdFx0LyoqXG5cdFx0ICogQmluZCBsbG1zLWVkaXRhYmxlIG1ldGFib3ggZmllbGRzIGFuZCByZWxhdGVkIGRvbSBpbnRlcmFjdGlvbnNcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjEwLjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xMC4wXG5cdFx0ICovXG5cdFx0dGhpcy5iaW5kX2VkaXRhYmxlcyA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdGZ1bmN0aW9uIG1ha2VfZWRpdGFibGUoICRmaWVsZCApIHtcblxuXHRcdFx0XHR2YXIgJGxhYmVsID0gJGZpZWxkLmZpbmQoICdsYWJlbCcgKS5jbG9uZSgpLFxuXHRcdFx0XHRcdG5hbWUgPSAkZmllbGQuYXR0ciggJ2RhdGEtbGxtcy1lZGl0YWJsZScgKSxcblx0XHRcdFx0XHR0eXBlID0gJGZpZWxkLmF0dHIoICdkYXRhLWxsbXMtZWRpdGFibGUtdHlwZScgKSxcblx0XHRcdFx0XHRyZXF1aXJlZCA9ICRmaWVsZC5hdHRyKCAnZGF0YS1sbG1zLWVkaXRhYmxlLXJlcXVpcmVkJyApIHx8ICdubycsXG5cdFx0XHRcdFx0dmFsID0gJGZpZWxkLmF0dHIoICdkYXRhLWxsbXMtZWRpdGFibGUtdmFsdWUnICksXG5cdFx0XHRcdFx0JGlucHV0O1xuXG5cdFx0XHRcdHJlcXVpcmVkID0gKCAneWVzJyA9PT0gcmVxdWlyZWQgKSA/ICcgcmVxdWlyZWQ9XCJyZXF1aXJlZFwiJyA6ICcnO1xuXG5cdFx0XHRcdGlmICggJ3NlbGVjdCcgPT09IHR5cGUgKSB7XG5cblx0XHRcdFx0XHR2YXIgb3B0aW9ucyA9IEpTT04ucGFyc2UoICRmaWVsZC5hdHRyKCAnZGF0YS1sbG1zLWVkaXRhYmxlLW9wdGlvbnMnICkgKSxcblx0XHRcdFx0XHRcdHNlbGVjdGVkO1xuXG5cdFx0XHRcdFx0JGlucHV0ID0gJCggJzxzZWxlY3QgbmFtZT1cIicgKyBuYW1lICsgJ1wiJyArIHJlcXVpcmVkICsgJyAvPicpO1xuXHRcdFx0XHRcdGZvciAoIHZhciBrZXkgaW4gb3B0aW9ucyApIHtcblx0XHRcdFx0XHRcdHNlbGVjdGVkID0gdmFsID09PSBrZXkgPyAnIHNlbGVjdGVkPVwic2VsZWN0ZWRcIicgOiAnJztcblx0XHRcdFx0XHRcdCRpbnB1dC5hcHBlbmQoICc8b3B0aW9uIHZhbHVlPVwiJyArIGtleSArICdcIicgKyBzZWxlY3RlZCArICc+JyArIG9wdGlvbnNbIGtleSBdICsgJzwvb3B0aW9uPicgKTtcblx0XHRcdFx0XHR9XG5cblxuXHRcdFx0XHR9IGVsc2UgaWYgKCAnZGF0ZXRpbWUnID09PSB0eXBlICkge1xuXG5cdFx0XHRcdFx0JGlucHV0ID0gJCggJzxkaXYgY2xhc3M9XCJsbG1zLWRhdGV0aW1lLWZpZWxkXCIgLz4nICk7XG5cblx0XHRcdFx0XHR2YWwgPSBKU09OLnBhcnNlKCB2YWwgKTtcblx0XHRcdFx0XHR2YXIgZm9ybWF0ID0gJGZpZWxkLmF0dHIoICdkYXRhLWxsbXMtZWRpdGFibGUtZGF0ZS1mb3JtYXQnICkgfHwgJycsXG5cdFx0XHRcdFx0XHRtaW5fZGF0ZSA9ICRmaWVsZC5hdHRyKCAnZGF0YS1sbG1zLWVkaXRhYmxlLWRhdGUtbWluJyApIHx8ICcnLFxuXHRcdFx0XHRcdFx0bWF4X2RhdGUgPSAkZmllbGQuYXR0ciggJ2RhdGEtbGxtcy1lZGl0YWJsZS1kYXRlLW1heCcgKSB8fCAnJztcblxuXHRcdFx0XHRcdCRwaWNrZXIgPSAkKCAnPGlucHV0IGNsYXNzPVwibGxtcy1kYXRlLWlucHV0IGxsbXMtZGF0ZXBpY2tlclwiIGRhdGEtZm9ybWF0PVwiJyArIGZvcm1hdCArICdcIiBkYXRhLW1heC1kYXRlPVwiJyArIG1heF9kYXRlICsgJ1wiIGRhdGEtbWluLWRhdGU9XCInICsgbWluX2RhdGUgKyAnXCIgbmFtZT1cIicgKyBuYW1lICsgJ1tkYXRlXVwiIHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCInICsgIHZhbC5kYXRlICsgJ1wiPicgKTtcblx0XHRcdFx0XHRzZWxmLmJpbmRfZGF0ZXBpY2tlciggJHBpY2tlciApO1xuXHRcdFx0XHRcdCRpbnB1dC5hcHBlbmQoICRwaWNrZXIgKTtcblx0XHRcdFx0XHQkaW5wdXQuYXBwZW5kKCAnPGVtPkA8L2VtPicpO1xuXG5cdFx0XHRcdFx0JGlucHV0LmFwcGVuZCggJzxpbnB1dCBjbGFzcz1cImxsbXMtdGltZS1pbnB1dFwiIG1heD1cIjIzXCIgbWluPVwiMFwiIG5hbWU9XCInICsgbmFtZSArICdbaG91cl1cIiB0eXBlPVwibnVtYmVyXCIgdmFsdWU9XCInICsgIHZhbC5ob3VyICsgJ1wiPicgKTtcblx0XHRcdFx0XHQkaW5wdXQuYXBwZW5kKCAnPGVtPjo8L2VtPicpO1xuXHRcdFx0XHRcdCRpbnB1dC5hcHBlbmQoICc8aW5wdXQgY2xhc3M9XCJsbG1zLXRpbWUtaW5wdXRcIiBtYXg9XCI1OVwiIG1pbj1cIjBcIiBuYW1lPVwiJyArIG5hbWUgKyAnW21pbnV0ZV1cIiB0eXBlPVwibnVtYmVyXCIgdmFsdWU9XCInICsgIHZhbC5taW51dGUgKyAnXCI+JyApO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHQkaW5wdXQgPSAkKCAnPGlucHV0IG5hbWU9XCInICsgbmFtZSArICdcIiB0eXBlPVwiJyArIHR5cGUgKyAnXCIgdmFsdWU9XCInICsgdmFsICsgJ1wiJyArIHJlcXVpcmVkICsgJz4nKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdCRmaWVsZC5lbXB0eSgpLmFwcGVuZCggJGxhYmVsICkuYXBwZW5kKCAkaW5wdXQgKTtcblxuXHRcdFx0fTtcblxuXHRcdFx0JCggJ2EubGxtcy1lZGl0YWJsZScgKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oIGUgKSB7XG5cblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0XHRcdHZhciAkYnRuID0gJCggdGhpcyApLFxuXHRcdFx0XHRcdCRmaWVsZHM7XG5cblx0XHRcdFx0aWYgKCAkYnRuLmF0dHIoICdkYXRhLWZpZWxkcycgKSApIHtcblx0XHRcdFx0XHQkZmllbGRzID0gJCggJGJ0bi5hdHRyKCAnZGF0YS1maWVsZHMnICkgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkZmllbGRzID0gJGJ0bi5jbG9zZXN0KCAnLmxsbXMtbWV0YWJveC1zZWN0aW9uJyApLmZpbmQoICdbZGF0YS1sbG1zLWVkaXRhYmxlXScgKTtcblx0XHRcdFx0fVxuXG5cblx0XHRcdFx0JGJ0bi5yZW1vdmUoKTtcblxuXHRcdFx0XHQkZmllbGRzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdG1ha2VfZWRpdGFibGUoICQoIHRoaXMgKSApO1xuXHRcdFx0XHR9ICk7XG5cblx0XHRcdH0gKTtcblxuXHRcdH07XG5cblx0XHQvKipcblx0XHQgKiBCaW5kIEVuZ2FnZW1lbnQgcG9zdCB0eXBlIEpTXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMy4xLjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xLjBcblx0XHQgKi9cblx0XHR0aGlzLmJpbmRfbGxtc19lbmdhZ2VtZW50ID0gZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0Ly8gd2hlbiB0aGUgZW5nYWdlbWVudCB0eXBlIGNoYW5nZXMgd2UgbmVlZCB0byBkbyBzb21lIHRoaW5ncyB0byB0aGUgVUlcblx0XHRcdCQoICcjX2xsbXNfZW5nYWdlbWVudF90eXBlJyApLm9uKCAnY2hhbmdlJywgZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0JCggJyNfbGxtc19lbmdhZ2VtZW50JyApLnRyaWdnZXIoICdsbG1zLWVuZ2FnZW1lbnQtdHlwZS1jaGFuZ2UnLCAkKCB0aGlzICkudmFsKCkgKTtcblxuXHRcdFx0fSApO1xuXG5cdFx0XHQvLyBjdXN0b20gdHJpZ2dlciB3aGVuIGNhbGxlZCB3aGVuIHRoZSBlbmdhZ2VtZW50IHR5cGUgY2hhbmdzXG5cdFx0XHQkKCAnI19sbG1zX2VuZ2FnZW1lbnQnICkub24oICdsbG1zLWVuZ2FnZW1lbnQtdHlwZS1jaGFuZ2UnLCBmdW5jdGlvbiggZSwgZW5nYWdlbWVudF90eXBlICkge1xuXG5cdFx0XHRcdHZhciAkc2VsZWN0ID0gJCggdGhpcyApO1xuXG5cdFx0XHRcdHN3aXRjaCAoIGVuZ2FnZW1lbnRfdHlwZSApIHtcblxuXHRcdFx0XHRcdC8qKlxuXHRcdFx0XHRcdCAqIGNvcmUgZW5nYWdlbWVudHMgcmVsYXRlZCB0byBhIENQVFxuXHRcdFx0XHRcdCAqL1xuXHRcdFx0XHRcdGNhc2UgJ2FjaGlldmVtZW50Jzpcblx0XHRcdFx0XHRjYXNlICdjZXJ0aWZpY2F0ZSc6XG5cdFx0XHRcdFx0Y2FzZSAnZW1haWwnOlxuXG5cdFx0XHRcdFx0XHR2YXIgY3B0ID0gJ2xsbXNfJyArIGVuZ2FnZW1lbnRfdHlwZTtcblxuXHRcdFx0XHRcdFx0JHNlbGVjdC52YWwoIG51bGwgKS5hdHRyKCAnZGF0YS1wb3N0LXR5cGUnLCBjcHQgKS50cmlnZ2VyKCAnY2hhbmdlJyApO1xuXHRcdFx0XHRcdFx0c2VsZi5wb3N0X3NlbGVjdCggJHNlbGVjdCApO1xuXG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHQvKipcblx0XHRcdFx0XHQgKiBBbGxvdyBvdGhlciBwbHVnaW5zIGFuZCBkZXZlbG9wZXJzIHRvIGhvb2sgaW50byB0aGUgZW5nYWdlbWVudCB0eXBlIGNoYW5nZSBhY3Rpb25cblx0XHRcdFx0XHQgKi9cblx0XHRcdFx0XHRkZWZhdWx0OlxuXG5cdFx0XHRcdFx0XHQkc2VsZWN0LnRyaWdnZXIoICdsbG1zLWVuZ2FnZW1lbnQtdHlwZS1jaGFuZ2UtZXh0ZXJuYWwnLCBlbmdhZ2VtZW50X3R5cGUgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH0gKTtcblxuXHRcdH07XG5cblx0XHQvKipcblx0XHQgKiBBY3Rpb25zIGZvciBtZW1iZXJzaGlwc1xuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMC4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTguMlxuXHRcdCAqL1xuXHRcdHRoaXMuYmluZF9sbG1zX21lbWJlcnNoaXAgPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0Ly8gcmVtb3ZlIGF1dG8tZW5yb2xsIGNvdXJzZVxuXHRcdFx0JCggJ2FbaHJlZj1cIiNsbG1zLWNvdXJzZS1yZW1vdmVcIl0nICkub24oICdjbGljaycsIGZ1bmN0aW9uKCBlICkge1xuXG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0XHR2YXIgJGVsID0gJCggdGhpcyApLFxuXHRcdFx0XHRcdCRyb3cgPSAkZWwuY2xvc2VzdCggJ3RyJyApLFxuXHRcdFx0XHRcdCRjb250YWluZXIgPSAkZWwuY2xvc2VzdCggJy5sbG1zLW1iLWxpc3QnICk7XG5cblx0XHRcdFx0TExNUy5TcGlubmVyLnN0YXJ0KCAkY29udGFpbmVyICk7XG5cblx0XHRcdFx0d2luZG93LkxMTVMuQWpheC5jYWxsKCB7XG5cdFx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdFx0YWN0aW9uOiAnbWVtYmVyc2hpcF9yZW1vdmVfYXV0b19lbnJvbGxfY291cnNlJyxcblx0XHRcdFx0XHRcdGNvdXJzZV9pZDogJGVsLmF0dHIoICdkYXRhLWlkJyApLFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0YmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0XHRcdCRjb250YWluZXIuZmluZCggJ3AuZXJyb3InICkucmVtb3ZlKCk7XG5cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKCByICkge1xuXG5cdFx0XHRcdFx0XHRpZiAoIHIuc3VjY2VzcyApIHtcblxuXHRcdFx0XHRcdFx0XHQkcm93LmZhZGVPdXQoIDIwMCApO1xuXHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHQkcm93LnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0XHR9LCA0MDAgKTtcblxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHQkY29udGFpbmVyLnByZXBlbmQoICc8cCBjbGFzcz1cImVycm9yXCI+JyArIHIubWVzc2FnZSArICc8L3A+JyApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdExMTVMuU3Bpbm5lci5zdG9wKCAkY29udGFpbmVyICk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0fSApO1xuXG5cdFx0XHR9ICk7XG5cblx0XHRcdC8vIGJ1bGsgZW5yb2xsIGFsbCBtZW1iZXJzIGludG8gYSBjb3Vyc2Vcblx0XHRcdCQoICdhW2hyZWY9XCIjbGxtcy1jb3Vyc2UtYnVsay1lbnJvbGxcIl0nICkub24oICdjbGljaycsIGZ1bmN0aW9uKCBlICkge1xuXG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0XHR2YXIgJGVsID0gJCggdGhpcyApLFxuXHRcdFx0XHRcdCRyb3cgPSAkZWwuY2xvc2VzdCggJ3RyJyApLFxuXHRcdFx0XHRcdCRjb250YWluZXIgPSAkZWwuY2xvc2VzdCggJy5sbG1zLW1iLWxpc3QnICk7XG5cblx0XHRcdFx0aWYgKCAhIHdpbmRvdy5jb25maXJtKCBMTE1TLmwxMG4udHJhbnNsYXRlKCAnQ2xpY2sgb2theSB0byBlbnJvbGwgYWxsIGFjdGl2ZSBtZW1iZXJzIGludG8gdGhlIHNlbGVjdGVkIGNvdXJzZS4gRW5yb2xsbWVudCB3aWxsIHRha2UgcGxhY2UgaW4gdGhlIGJhY2tncm91bmQgYW5kIHlvdSBtYXkgbGVhdmUgeW91ciBzaXRlIGFmdGVyIGNvbmZpcm1hdGlvbi4gVGhpcyBhY3Rpb24gY2Fubm90IGJlIHVuZG9uZSEnICkgKSApIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRMTE1TLlNwaW5uZXIuc3RhcnQoICRjb250YWluZXIgKTtcblxuXHRcdFx0XHR3aW5kb3cuTExNUy5BamF4LmNhbGwoIHtcblx0XHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0XHRhY3Rpb246ICdidWxrX2Vucm9sbF9tZW1iZXJzaGlwX2ludG9fY291cnNlJyxcblx0XHRcdFx0XHRcdGNvdXJzZV9pZDogJGVsLmF0dHIoICdkYXRhLWlkJyApLFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0YmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHQkY29udGFpbmVyLmZpbmQoICdwLmVycm9yJyApLnJlbW92ZSgpO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24oIHIgKSB7XG5cblx0XHRcdFx0XHRcdGlmICggci5zdWNjZXNzICkge1xuXG5cdFx0XHRcdFx0XHRcdCRlbC5yZXBsYWNlV2l0aCggJzxzdHJvbmcgc3R5bGU9XCJmbG9hdDpyaWdodDtcIj4nICsgci5kYXRhLm1lc3NhZ2UgKyAnJm5ic3A7Jm5ic3A7PC9zdHJvbmc+JyApO1xuXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdCRjb250YWluZXIucHJlcGVuZCggJzxwIGNsYXNzPVwiZXJyb3JcIj4nICsgci5tZXNzYWdlICsgJzwvcD4nICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0TExNUy5TcGlubmVyLnN0b3AoICRjb250YWluZXIgKTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHR9ICk7XG5cblx0XHRcdH0gKTtcblxuXHRcdH07XG5cblx0XHQvKipcblx0XHQgKiBBY3Rpb25zIGZvciBPUkRFUlNcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjAuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjEwLjBcblx0XHQgKi9cblx0XHR0aGlzLmJpbmRfbGxtc19vcmRlciA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQkKCAnYnV0dG9uW25hbWU9XCJsbG1zLXJlZnVuZC10b2dnbGVcIl0nICkub24oICdjbGljaycsIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdHZhciAkYnRuID0gJCggdGhpcyApLFxuXHRcdFx0XHRcdCRyb3cgPSAkYnRuLmNsb3Nlc3QoICd0cicgKSxcblx0XHRcdFx0XHR0eG5faWQgPSAkcm93LmF0dHIoICdkYXRhLXRyYW5zYWN0aW9uLWlkJyApLFxuXHRcdFx0XHRcdHJlZnVuZGFibGVfYW1vdW50ID0gJGJ0bi5hdHRyKCAnZGF0YS1yZWZ1bmRhYmxlJyApLFxuXHRcdFx0XHRcdGdhdGV3YXlfc3VwcG9ydHMgPSAoICcxJyA9PT0gJGJ0bi5hdHRyKCAnZGF0YS1nYXRld2F5LXN1cHBvcnRzJyApICkgPyB0cnVlIDogZmFsc2UsXG5cdFx0XHRcdFx0Z2F0ZXdheV90aXRsZSA9ICRidG4uYXR0ciggJ2RhdGEtZ2F0ZXdheScgKSxcblx0XHRcdFx0XHQkbmV3X3JvdyA9ICQoICcjbGxtcy10eG4tcmVmdW5kLW1vZGVsIC5sbG1zLXR4bi1yZWZ1bmQtZm9ybScgKS5jbG9uZSgpLFxuXHRcdFx0XHRcdCRnYXRld2F5X2J0biA9ICRuZXdfcm93LmZpbmQoICcuZ2F0ZXdheS1idG4nICk7XG5cblx0XHRcdFx0Ly8gY29uZmlndXJlIGFuZCBhZGQgdGhlIGZvcm1cblx0XHRcdFx0aWYgKCAncmVtb3ZlJyAhPT0gJGJ0bi5hdHRyKCAnZGF0YS1hY3Rpb24nICkgKSB7XG5cblx0XHRcdFx0XHQkYnRuLnRleHQoIExMTVMubDEwbi50cmFuc2xhdGUoICdDYW5jZWwnICkgKTtcblx0XHRcdFx0XHQkYnRuLmF0dHIoICdkYXRhLWFjdGlvbicsICdyZW1vdmUnICk7XG5cdFx0XHRcdFx0JG5ld19yb3cuZmluZCggJ2lucHV0JyApLnJlbW92ZUF0dHIoICdkaXNhYmxlZCcgKTtcblx0XHRcdFx0XHQkbmV3X3Jvdy5maW5kKCAnaW5wdXRbbmFtZT1cImxsbXNfcmVmdW5kX2Ftb3VudFwiXScgKS5hdHRyKCAnbWF4JywgcmVmdW5kYWJsZV9hbW91bnQgKTtcblx0XHRcdFx0XHQkbmV3X3Jvdy5maW5kKCAnaW5wdXRbbmFtZT1cImxsbXNfcmVmdW5kX3R4bl9pZFwiXScgKS52YWwoIHR4bl9pZCApO1xuXG5cdFx0XHRcdFx0aWYgKCBnYXRld2F5X3N1cHBvcnRzICkge1xuXHRcdFx0XHRcdFx0JGdhdGV3YXlfYnRuLmZpbmQoICcubGxtcy1nYXRld2F5LXRpdGxlJyApLnRleHQoIGdhdGV3YXlfdGl0bGUgKTtcblx0XHRcdFx0XHRcdCRnYXRld2F5X2J0bi5zaG93KCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0JHJvdy5hZnRlciggJG5ld19yb3cgKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0JGJ0bi50ZXh0KCBMTE1TLmwxMG4udHJhbnNsYXRlKCAnUmVmdW5kJyApICk7XG5cdFx0XHRcdFx0JGJ0bi5hdHRyKCAnZGF0YS1hY3Rpb24nLCAnJyApO1xuXHRcdFx0XHRcdCRyb3cubmV4dCggJ3RyJyApLnJlbW92ZSgpO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSApO1xuXG5cdFx0XHQkKCAnYnV0dG9uW25hbWU9XCJsbG1zLW1hbnVhbC10eG4tdG9nZ2xlXCJdJyApLm9uKCAnY2xpY2snLCBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHR2YXIgJGJ0biA9ICQoIHRoaXMgKSxcblx0XHRcdFx0XHQkcm93ID0gJGJ0bi5jbG9zZXN0KCAndHInICksXG5cdFx0XHRcdFx0JG5ld19yb3cgPSAkKCAnI2xsbXMtbWFudWFsLXR4bi1tb2RlbCAubGxtcy1tYW51YWwtdHhuLWZvcm0nICkuY2xvbmUoKTtcblxuXHRcdFx0XHQvLyBjb25maWd1cmUgYW5kIGFkZCB0aGUgZm9ybVxuXHRcdFx0XHRpZiAoICdyZW1vdmUnICE9PSAkYnRuLmF0dHIoICdkYXRhLWFjdGlvbicgKSApIHtcblxuXHRcdFx0XHRcdCRidG4udGV4dCggTExNUy5sMTBuLnRyYW5zbGF0ZSggJ0NhbmNlbCcgKSApO1xuXHRcdFx0XHRcdCRidG4uYXR0ciggJ2RhdGEtYWN0aW9uJywgJ3JlbW92ZScgKTtcblx0XHRcdFx0XHQkbmV3X3Jvdy5maW5kKCAnaW5wdXQnICkucmVtb3ZlQXR0ciggJ2Rpc2FibGVkJyApO1xuXG5cdFx0XHRcdFx0JHJvdy5hZnRlciggJG5ld19yb3cgKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0JGJ0bi50ZXh0KCBMTE1TLmwxMG4udHJhbnNsYXRlKCAnUmVjb3JkIGEgTWFudWFsIFBheW1lbnQnICkgKTtcblx0XHRcdFx0XHQkYnRuLmF0dHIoICdkYXRhLWFjdGlvbicsICcnICk7XG5cdFx0XHRcdFx0JHJvdy5uZXh0KCAndHInICkucmVtb3ZlKCk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9ICk7XG5cblx0XHRcdC8vIGNhY2hlIHRoZSBvcmlnaW5hbCB2YWx1ZSB3aGVuIGZvY3VzaW5nIG9uIGEgcGF5bWVudCBnYXRld2F5IHNlbGVjdFxuXHRcdFx0Ly8gdXNlZCBiZWxvdyBzbyB0aGUgb3JpZ2luYWwgZmllbGQgcmVsYXRlZCBkYXRhIGNhbiBiZSByZXN0b3JlZCB3aGVuIHN3aXRjaGluZyBiYWNrIHRvIHRoZSBvcmlnbmlhbGx5IHNlbGVjdGVkIGdhdGV3YXlcblx0XHRcdCQoICcubGxtcy1tZXRhYm94JyApLm9uZSggJ2ZvY3VzJywgJy5sbG1zLW1ldGFib3gtZmllbGRbZGF0YS1sbG1zLWVkaXRhYmxlPVwicGF5bWVudF9nYXRld2F5XCJdIHNlbGVjdCcsIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdGlmICggISAkKCB0aGlzICkuYXR0ciggJ2RhdGEtb3JpZ2luYWwtdmFsdWUnICkgKSB7XG5cdFx0XHRcdFx0JCggdGhpcyApLmF0dHIoICdkYXRhLW9yaWdpbmFsLXZhbHVlJywgJCggdGhpcyApLnZhbCgpICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0fSApO1xuXG5cdFx0XHQvLyB3aGVuIHNlbGVjdGluZyBhIG5ldyBwYXltZW50IGdhdGV3YXkgZ2V0IGZpZWxkIGRhdGEgYW5kIHVwZGF0ZSB0aGUgZG9tIHRvIG9ubHkgZGlzcGxheSB0aGUgZmllbGRzXG5cdFx0XHQvLyBzdXBwb3J0ZWQvbmVlZGVkIGJ5IHRoZSBuZXdseSBzZWxlY3RlZCBnYXRld2F5XG5cdFx0XHQkKCAnLmxsbXMtbWV0YWJveCcgKS5vbiggJ2NoYW5nZScsICcubGxtcy1tZXRhYm94LWZpZWxkW2RhdGEtbGxtcy1lZGl0YWJsZT1cInBheW1lbnRfZ2F0ZXdheVwiXSBzZWxlY3QnLCBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHR2YXIgJHNlbGVjdCA9ICQoIHRoaXMgKSxcblx0XHRcdFx0XHRnYXRld2F5ID0gJHNlbGVjdC52YWwoKSxcblx0XHRcdFx0XHRkYXRhID0gSlNPTi5wYXJzZSggJHNlbGVjdC5jbG9zZXN0KCAnLmxsbXMtbWV0YWJveC1maWVsZCcgKS5hdHRyKCAnZGF0YS1nYXRld2F5LWZpZWxkcycgKSApLFxuXHRcdFx0XHRcdGdhdGV3YXlfZGF0YSA9IGRhdGFbIGdhdGV3YXkgXTtcblxuXHRcdFx0XHRmb3IgKCB2YXIgZmllbGQgaW4gZ2F0ZXdheV9kYXRhICkge1xuXG5cdFx0XHRcdFx0dmFyICRmaWVsZCA9ICQoICdpbnB1dFtuYW1lPVwiJyArIGdhdGV3YXlfZGF0YVsgZmllbGQgXS5uYW1lICsgJ1wiXScgKSxcblx0XHRcdFx0XHRcdCR3cmFwID0gJGZpZWxkLmNsb3Nlc3QoICcubGxtcy1tZXRhYm94LWZpZWxkJyApO1xuXG5cdFx0XHRcdFx0Ly8gYWx3YXlzIGNsZWFyIHRoZSB2YWx1ZSB3aGVuIHN3aXRjaGluZ1xuXHRcdFx0XHRcdC8vIGVuc3VyZXMgdGhhdCBvdXRkYXRlZCBkYXRhIGlzIHJlbW92ZWQgZnJvbSB0aGUgREJcblx0XHRcdFx0XHQkZmllbGQuYXR0ciggJ3ZhbHVlJywgJycgKTtcblxuXHRcdFx0XHRcdC8vIGlmIHRoZSBmaWVsZCBpcyBlbmFibGVkIHNob3cgaXQgdGhlIGZpZWxkIGFuZCwgaWYgd2UncmUgc3dpdGNoaW5nIGJhY2sgdG8gdGhlIG9yaWdpbmFsbHkgc2VsZWN0ZWRcblx0XHRcdFx0XHQvLyBnYXRld2F5LCByZWxvYWQgdGhlIHZhbHVlIGZyb20gdGhlIGRvbVxuXHRcdFx0XHRcdGlmICggZ2F0ZXdheV9kYXRhWyBmaWVsZCBdLmVuYWJsZWQgKSB7XG5cblx0XHRcdFx0XHRcdCR3cmFwLnNob3coKTtcblx0XHRcdFx0XHRcdCRmaWVsZC5hdHRyKCAncmVxdWlyZWQnLCAncmVxdWlyZWQnICk7XG5cdFx0XHRcdFx0XHRpZiAoIGdhdGV3YXkgPT09ICRzZWxlY3QuYXR0ciggJ2RhdGEtb3JpZ2luYWwtdmFsdWUnKSApIHtcblx0XHRcdFx0XHRcdFx0JGZpZWxkLnZhbCggJHdyYXAuYXR0ciggJ2RhdGEtbGxtcy1lZGl0YWJsZS12YWx1ZScgKSApO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gb3RoZXJ3aXNlIGhpZGUgdGhlIGZpZWxkXG5cdFx0XHRcdFx0Ly8gdGhpcyB3aWxsIGVuc3VyZSBpdCBnZXRzIHVwZGF0ZWQgaW4gdGhlIGRhdGFiYXNlXG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0JGZpZWxkLnJlbW92ZUF0dHIoICdyZXF1aXJlZCcgKTtcblx0XHRcdFx0XHRcdCR3cmFwLmhpZGUoKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdH0gKTtcblxuXHRcdH07XG5cblx0XHQvKipcblx0XHQgKiBCaW5kcyBjdXN0b20gbGxtcyBtZXJnZSBjb2RlIGJ1dHRvbnNcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjEuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjkuMlxuXHRcdCAqL1xuXHRcdHRoaXMuYmluZF9tZXJnZV9jb2RlX2J1dHRvbnMgPSBmdW5jdGlvbiggJHdyYXBwZXJzICkge1xuXG5cdFx0XHQkd3JhcHBlcnMgPSAkd3JhcHBlcnMgfHwgJCggJy5sbG1zLW1lcmdlLWNvZGUtd3JhcHBlcicgKTtcblxuXHRcdFx0JHdyYXBwZXJzLmZpbmQoICcubGxtcy1tZXJnZS1jb2RlLWJ1dHRvbicgKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0JCggdGhpcyApLm5leHQoICcubGxtcy1tZXJnZS1jb2RlcycgKS50b2dnbGVDbGFzcyggJ2FjdGl2ZScgKTtcblxuXHRcdFx0fSApO1xuXG5cdFx0XHQkd3JhcHBlcnMuZmluZCggJy5sbG1zLW1lcmdlLWNvZGVzIGxpJyApLm9uKCAnY2xpY2snLCBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHR2YXIgJGVsID0gJCggdGhpcyApLFxuXHRcdFx0XHRcdCRwYXJlbnQgPSAkZWwuY2xvc2VzdCggJy5sbG1zLW1lcmdlLWNvZGVzJyApLFxuXHRcdFx0XHRcdHRhcmdldCA9ICRwYXJlbnQuYXR0ciggJ2RhdGEtdGFyZ2V0JyApLFxuXHRcdFx0XHRcdGNvZGUgPSAkZWwuYXR0ciggJ2RhdGEtY29kZScgKTtcblxuXHRcdFx0XHQvLyBkZWFsaW5nIHdpdGggYSB0aW55bWNlIGluc3RhbmNlXG5cdFx0XHRcdGlmICggLTEgPT09IHRhcmdldC5pbmRleE9mKCAnIycgKSApIHtcblxuXHRcdFx0XHRcdHZhciBlZGl0b3IgPSB3aW5kb3cudGlueW1jZS5lZGl0b3JzWyB0YXJnZXQgXTtcblx0XHRcdFx0XHRpZiAoIGVkaXRvciApIHtcblx0XHRcdFx0XHRcdGVkaXRvci5pbnNlcnRDb250ZW50KCBjb2RlICk7XG5cdFx0XHRcdFx0fSAvLyBmYWxsYmFjayBpbiBjYXNlIHdlIGNhbid0IGFjY2VzcyB0aGUgZWRpdG9yIGRpcmVjdGx5XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRhbGVydCggTExNUy5sMTBuLnRyYW5zbGF0ZSggJ0NvcHkgdGhpcyBjb2RlIGFuZCBwYXN0ZSBpdCBpbnRvIHRoZSBkZXNpcmVkIGFyZWEnICkgKyAnOiAnICsgY29kZSApO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIGRlYWxpbmcgd2l0aCBhIERPTSBpZFxuXHRcdFx0XHRlbHNlIHtcblxuXHRcdFx0XHRcdCQoIHRhcmdldCApLnZhbCggJCggdGFyZ2V0ICkudmFsKCkgKyBjb2RlICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdCRwYXJlbnQucmVtb3ZlQ2xhc3MoICdhY3RpdmUnICk7XG5cblx0XHRcdH0gKTtcblxuXHRcdH07XG5cblx0XHQvKipcblx0XHQgKiBCaW5kIG1ldGFib3ggdGFic1xuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMC4wXG5cdFx0ICogQHZlcnNpb24gIDMuMC4wXG5cdFx0ICovXG5cdFx0dGhpcy5iaW5kX3RhYnMgPSBmdW5jdGlvbigpIHtcblx0XHRcdCQoICcubGxtcy1uYXYtdGFiLXdyYXBwZXIgLnRhYnMgbGknICkub24oICdjbGljaycsIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdHZhciAkYnRuID0gJCggdGhpcyApLFxuXHRcdFx0XHRcdCRtZXRhYm94ID0gJGJ0bi5jbG9zZXN0KCAnLmxsbXMtbWItY29udGFpbmVyJyApLFxuXHRcdFx0XHRcdHRhYl9pZCA9ICRidG4uYXR0ciggJ2RhdGEtdGFiJyApO1xuXG5cdFx0XHRcdCRidG4uc2libGluZ3MoKS5yZW1vdmVDbGFzcyggJ2xsbXMtYWN0aXZlJyApO1xuXG5cdFx0XHRcdCRtZXRhYm94LmZpbmQoICcudGFiLWNvbnRlbnQnICkucmVtb3ZlQ2xhc3MoICdsbG1zLWFjdGl2ZScgKTtcblxuXHRcdFx0XHQkYnRuLmFkZENsYXNzKCAnbGxtcy1hY3RpdmUnICk7XG5cdFx0XHRcdCQoICcjJyArIHRhYl9pZCApLmFkZENsYXNzKCAnbGxtcy1hY3RpdmUnICk7XG5cblx0XHRcdH0gKTtcblx0XHR9O1xuXG5cdFx0LyoqXG5cdFx0ICogRW5hYmxlIFdQIFBvc3QgVGFibGUgc2VhcmNoZXMgZm9yIGFwcGxpY2FibGUgc2VsZWN0MiBib3hlc1xuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMC4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTcuNVxuXHRcdCAqL1xuXHRcdHRoaXMucG9zdF9zZWxlY3QgPSBmdW5jdGlvbiggJGVsICkge1xuXG5cdFx0XHR2YXIgcG9zdF90eXBlID0gJGVsLmF0dHIoICdkYXRhLXBvc3QtdHlwZScgKSB8fCBwb3N0LFxuXHRcdFx0XHRhbGxvd19jbGVhciA9ICRlbC5hdHRyKCAnZGF0YS1wb3N0LXR5cGUnICkgfHwgZmFsc2U7XG5cblx0XHRcdCRlbC5sbG1zU2VsZWN0Migge1xuXHRcdFx0XHRhbGxvd0NsZWFyOiBhbGxvd19jbGVhcixcblx0XHRcdFx0YWpheDoge1xuXHRcdFx0XHRcdGRhdGFUeXBlOiAnSlNPTicsXG5cdFx0XHRcdFx0ZGVsYXk6IDI1MCxcblx0XHRcdFx0XHRtZXRob2Q6ICdQT1NUJyxcblx0XHRcdFx0XHR1cmw6IHdpbmRvdy5hamF4dXJsLFxuXHRcdFx0XHRcdGRhdGE6IGZ1bmN0aW9uKCBwYXJhbXMgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHRhY3Rpb246ICdzZWxlY3QyX3F1ZXJ5X3Bvc3RzJyxcblx0XHRcdFx0XHRcdFx0cGFnZTogKCBwYXJhbXMucGFnZSApID8gcGFyYW1zLnBhZ2UgLSAxIDogMCwgLy8gMCBpbmRleCB0aGUgcGFnZXMgdG8gbWFrZSBpdCBzaW1wbGVyIGZvciB0aGUgZGF0YWJhc2UgcXVlcnlcblx0XHRcdFx0XHRcdFx0cG9zdF90eXBlOiBwb3N0X3R5cGUsXG5cdFx0XHRcdFx0XHRcdHRlcm06IHBhcmFtcy50ZXJtLFxuXHRcdFx0XHRcdFx0XHRfYWpheF9ub25jZTogd3BfYWpheF9kYXRhLm5vbmNlLFxuXHRcdFx0XHRcdFx0XHQvLyBwb3N0X2lkOiBsbG1zLnBvc3QuaWQsXG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0cHJvY2Vzc1Jlc3VsdHM6IGZ1bmN0aW9uKCBkYXRhLCBwYXJhbXMgKSB7XG5cblx0XHRcdFx0XHRcdC8vIHJlY3Vyc2l2ZSBmdW5jdGlvbiBmb3IgY3JlYXRpbmdcblx0XHRcdFx0XHRcdGZ1bmN0aW9uIG1hcF9kYXRhKCBpdGVtcyApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyB0aGlzIGlzIGEgZmxhdCBhcnJheSBvZiByZXN1bHRzXG5cdFx0XHRcdFx0XHRcdC8vIHVzZWQgd2hlbiBvbmx5IG9uZSBwb3N0IHR5cGUgaXMgc2VsZWN0ZWRcblx0XHRcdFx0XHRcdFx0Ly8gYW5kIHRvIGZvcm1hdCBjaGlsZHJlbiB3aGVuIHVzaW5nIG9wdGdyb3VwcyB3aXRoIG11bHRpcGxlIHBvc3QgdHlwZXNcblx0XHRcdFx0XHRcdFx0aWYgKCBBcnJheS5pc0FycmF5KCBpdGVtcyApICkge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiAkLm1hcCggaXRlbXMsIGZ1bmN0aW9uKCBpdGVtICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGZvcm1hdF9pdGVtKCBpdGVtICk7XG5cdFx0XHRcdFx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdFx0XHRcdC8vIHRoaXMgc2V0cyB1cCB0aGUgdG9wIGxldmVsIG9wdGdyb3VwcyB3aGVuIHVzaW5nIG11bHRpcGxlIHBvc3QgdHlwZXNcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gJC5tYXAoIGl0ZW1zLCBmdW5jdGlvbiggaXRlbSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRleHQ6IGl0ZW0ubGFiZWwsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNoaWxkcmVuOiBtYXBfZGF0YSggaXRlbS5pdGVtcyApLFxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBmb3JtYXQgYSBzaW5nbGUgcmVzdWx0IChvcHRpb24pXG5cdFx0XHRcdFx0XHRmdW5jdGlvbiBmb3JtYXRfaXRlbSggaXRlbSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0XHR0ZXh0OiBpdGVtLm5hbWUsXG5cdFx0XHRcdFx0XHRcdFx0aWQ6IGl0ZW0uaWQsXG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdHJlc3VsdHM6IG1hcF9kYXRhKCBkYXRhLml0ZW1zICksXG5cdFx0XHRcdFx0XHRcdHBhZ2luYXRpb246IHtcblx0XHRcdFx0XHRcdFx0XHRtb3JlOiBkYXRhLm1vcmVcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGNhY2hlOiB0cnVlLFxuXHRcdFx0XHR3aWR0aDogJzgwJScsXG5cdFx0XHR9ICk7XG5cblx0XHRcdC8vIGFkZCBhIFwiVmlld1wiIGJ1dHRvbiB0byBzZWUgd2hhdCB0aGUgc2VsZWN0ZWQgcGFnZSBsb29rcyBsaWtlXG5cdFx0XHR2YXIgbXNnID0gTExNUy5sMTBuLnRyYW5zbGF0ZSggJ1ZpZXcnICksXG5cdFx0XHRcdCRidG4gPSAkKCAnPGEgY2xhc3M9XCJsbG1zLWJ1dHRvbi1zZWNvbmRhcnkgc21hbGxcIiBzdHlsZT1cIm1hcmdpbi1sZWZ0OjVweDtcIiB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiI1wiPicgKyAgbXNnICsgJyA8aSBjbGFzcz1cImZhIGZhLWV4dGVybmFsLWxpbmtcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+PC9hPicgKTtcblx0XHRcdCRlbC5uZXh0KCAnLnNlbGVjdDInICkuYWZ0ZXIoICRidG4gKTtcblxuXHRcdFx0JGVsLm9uKCAnY2hhbmdlJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBpZCA9ICQoIHRoaXMgKS52YWwoKTtcblx0XHRcdFx0aWYgKCBpZCApIHtcblx0XHRcdFx0XHQkYnRuLmF0dHIoICdocmVmJywgJy8/cD0nICsgaWQgKS5zaG93KCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JGJ0bi5oaWRlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gKS50cmlnZ2VyKCAnY2hhbmdlJyApO1xuXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIEJpbmQgZG9tIGV2ZW50cyBmb3IgLmxsbXMtdGFibGVzXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMy4wLjBcblx0XHQgKiBAdmVyc2lvbiAgMy4wLjBcblx0XHQgKi9cblx0XHR0aGlzLmJpbmRfdGFibGVzID0gZnVuY3Rpb24oKSB7XG5cblx0XHRcdCQoICcubGxtcy10YWJsZSBidXR0b25bbmFtZT1cImxsbXMtZXhwYW5kLXRhYmxlXCJdJyApLm9uKCAnY2xpY2snLCBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHR2YXIgJGJ0biA9ICQoIHRoaXMgKSxcblx0XHRcdFx0XHQkdGFibGUgPSAkYnRuLmNsb3Nlc3QoICcubGxtcy10YWJsZScgKVxuXG5cdFx0XHRcdC8vIHN3aXRjaCB0aGUgdGV4dCBvbiB0aGUgYnV0dG9uIGlmIGFsdCB0ZXh0IGlzIGZvdW5kXG5cdFx0XHRcdGlmICggJGJ0bi5hdHRyKCAnZGF0YS10ZXh0JyApICkge1xuXHRcdFx0XHRcdHZhciB0ZXh0ID0gJGJ0bi50ZXh0KCk7XG5cdFx0XHRcdFx0JGJ0bi50ZXh0KCAkYnRuLmF0dHIoICdkYXRhLXRleHQnICkgKTtcblx0XHRcdFx0XHQkYnRuLmF0dHIoICdkYXRhLXRleHQnLCB0ZXh0ICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBzd2l0Y2ggY2xhc3NlcyBvbiBhbGwgZXhwYW5kYWJsZSBlbGVtZW50c1xuXHRcdFx0XHQkdGFibGUuZmluZCggJy5leHBhbmRhYmxlJyApLmVhY2goIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdFx0aWYgKCAkKCB0aGlzICkuaGFzQ2xhc3MoICdjbG9zZWQnICkgKSB7XG5cdFx0XHRcdFx0XHQkKCB0aGlzICkuYWRkQ2xhc3MoICdvcGVuZWQnICkucmVtb3ZlQ2xhc3MoICdjbG9zZWQnICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdCQoIHRoaXMgKS5hZGRDbGFzcyggJ2Nsb3NlZCcgKS5yZW1vdmVDbGFzcyggJ29wZW5lZCcgKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fSApO1xuXG5cdFx0XHR9ICk7XG5cblx0XHR9O1xuXG5cdFx0Ly8gZ29cblx0XHR0aGlzLmluaXQoKTtcblxuXHR9O1xuXG5cdC8vIGluaXRhbGl6ZSB0aGUgb2JqZWN0XG5cdHdpbmRvdy5sbG1zLm1ldGFib3hlcyA9IG5ldyBNZXRhYm94ZXMoKTtcblxufSApKCBqUXVlcnkgKTtcbiJdfQ==
